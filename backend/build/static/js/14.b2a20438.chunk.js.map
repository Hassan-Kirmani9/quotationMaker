{"version":3,"sources":["pages/Products/CreateProducts.js","components/Typography/PageTitle.js","components/Typography/SectionTitle.js"],"names":["CreateProducts","history","useHistory","formData","setFormData","useState","name","description","sellingPrice","purchasePrice","loading","setLoading","errors","setErrors","apiError","setApiError","handleInputChange","e","value","target","prev","_objectSpread","parseFloat","handleCancel","push","_jsxs","_Fragment","children","className","_jsx","PageTitle","Button","type","layout","onClick","disabled","SectionTitle","onSubmit","async","preventDefault","validateForm","newErrors","trim","length","Object","keys","cleanedData","undefined","response","post","success","alert","message","error","_error$response","_error$response$data","_error$response2","_error$response2$data","console","data","backendErrors","forEach","key","Label","Input","onChange","placeholder","required","valid","maxLength","HelperText","rows","step","min","style","backgroundColor","_ref"],"mappings":"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","file":"static/js/14.b2a20438.chunk.js","sourcesContent":["import React, { useState } from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { post } from '../../api/axios'\r\n\r\nimport PageTitle from '../../components/Typography/PageTitle'\r\nimport SectionTitle from '../../components/Typography/SectionTitle'\r\nimport { Input, Label, Button, HelperText } from '@windmill/react-ui'\r\n\r\nfunction CreateProducts() {\r\n  const history = useHistory()\r\n\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    description: '',\r\n    sellingPrice: 0,\r\n    purchasePrice: 0\r\n  })\r\n\r\n  const [loading, setLoading] = useState(false)\r\n  const [errors, setErrors] = useState({})\r\n  const [apiError, setApiError] = useState('')\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [name]: name === 'sellingPrice' || name === 'purchasePrice' ? parseFloat(value) || 0 : value\r\n    }))\r\n\r\n    if (errors[name]) {\r\n      setErrors(prev => ({\r\n        ...prev,\r\n        [name]: ''\r\n      }))\r\n    }\r\n\r\n    if (apiError) {\r\n      setApiError('')\r\n    }\r\n  }\r\n\r\n  const validateForm = () => {\r\n    const newErrors = {}\r\n\r\n    if (!formData.name.trim()) {\r\n      newErrors.name = 'Product name is required'\r\n    } else if (formData.name.length > 200) {\r\n      newErrors.name = 'Product name cannot exceed 200 characters'\r\n    }\r\n\r\n    if (formData.description && formData.description.length > 1000) {\r\n      newErrors.description = 'Description cannot exceed 1000 characters'\r\n    }\r\n\r\n    if (!formData.sellingPrice || formData.sellingPrice < 0) {\r\n      newErrors.sellingPrice = 'Selling price must be 0 or greater'\r\n    }\r\n\r\n    if (!formData.purchasePrice || formData.purchasePrice < 0) {\r\n      newErrors.purchasePrice = 'Purchase price must be 0 or greater'\r\n    }\r\n\r\n    setErrors(newErrors)\r\n    return Object.keys(newErrors).length === 0\r\n  }\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault()\r\n\r\n    if (!validateForm()) {\r\n      return\r\n    }\r\n\r\n    setLoading(true)\r\n    setApiError('')\r\n\r\n    try {\r\n      const cleanedData = {\r\n        name: formData.name.trim(),\r\n        description: formData.description.trim() || undefined,\r\n        sellingPrice: parseFloat(formData.sellingPrice),\r\n        purchasePrice: parseFloat(formData.purchasePrice)\r\n      }\r\n\r\n      const response = await post(\"/products\", cleanedData)\r\n\r\n      if (response.success) {\r\n        alert('Product created successfully!')\r\n        history.push('/app/products')\r\n      } else {\r\n        setApiError(response.message || 'Failed to create product. Please try again.')\r\n      }\r\n    } catch (error) {\r\n      console.error('Error creating product:', error)\r\n\r\n      if (error.response?.data?.message) {\r\n        setApiError(error.response.data.message)\r\n      } else if (error.response?.data?.error) {\r\n        if (typeof error.response.data.error === 'string') {\r\n          setApiError(error.response.data.error)\r\n        } else if (error.response.data.error.errors) {\r\n          const backendErrors = {}\r\n          Object.keys(error.response.data.error.errors).forEach(key => {\r\n            backendErrors[key] = error.response.data.error.errors[key].message\r\n          })\r\n          setErrors(backendErrors)\r\n        }\r\n      } else if (error.message) {\r\n        setApiError(error.message)\r\n      } else {\r\n        setApiError('Failed to create product. Please check your connection and try again.')\r\n      }\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  const handleCancel = () => {\r\n    history.push('/app/products')\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"flex justify-between items-center mb-6\">\r\n        <PageTitle>Add New Product</PageTitle>\r\n        <Button\r\n          type=\"button\"\r\n          layout=\"outline\"\r\n          onClick={handleCancel}\r\n          disabled={loading}\r\n        >\r\n          Back to Products\r\n        </Button>\r\n      </div>\r\n\r\n      <div className=\"px-4 py-3 mb-8 bg-white rounded-lg shadow-md dark:bg-gray-800\">\r\n        <SectionTitle>Product Information</SectionTitle>\r\n\r\n        <form onSubmit={handleSubmit}>\r\n          {apiError && (\r\n            <div className=\"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded\">\r\n              {apiError}\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"grid grid-cols-1 gap-4\">\r\n            <Label>\r\n              <span>Product Name *</span>\r\n              <Input\r\n                className=\"mt-1\"\r\n                name=\"name\"\r\n                value={formData.name}\r\n                onChange={handleInputChange}\r\n                placeholder=\"Enter product name\"\r\n                required\r\n                valid={!errors.name}\r\n                maxLength={200}\r\n              />\r\n              {errors.name && (\r\n                <HelperText valid={false}>{errors.name}</HelperText>\r\n              )}\r\n            </Label>\r\n\r\n            <Label>\r\n              <span>Description</span>\r\n              <textarea\r\n                className=\"mt-1 block w-full pt-2 pl-2 border-2 border-gray-300 rounded-md shadow-sm focus:border-purple-300 focus:ring focus:ring-purple-200 focus:ring-opacity-50 dark:border-gray-600 dark:bg-gray-700 dark:text-white\"\r\n                name=\"description\"\r\n                value={formData.description}\r\n                onChange={handleInputChange}\r\n                rows=\"4\"\r\n                placeholder=\"Enter product description (optional)\"\r\n                maxLength={1000}\r\n              />\r\n              {errors.description && (\r\n                <HelperText valid={false}>{errors.description}</HelperText>\r\n              )}\r\n            </Label>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              <Label>\r\n                <span>Purchase Price *</span>\r\n                <Input\r\n                  className=\"mt-1\"\r\n                  name=\"purchasePrice\"\r\n                  type=\"number\"\r\n                  step=\"0.01\"\r\n                  min=\"0\"\r\n                  value={formData.purchasePrice}\r\n                  onChange={handleInputChange}\r\n                  placeholder=\"0.00\"\r\n                  required\r\n                  valid={!errors.purchasePrice}\r\n                />\r\n                {errors.purchasePrice && (\r\n                  <HelperText valid={false}>{errors.purchasePrice}</HelperText>\r\n                )}\r\n              </Label>\r\n\r\n              <Label>\r\n                <span>Selling Price *</span>\r\n                <Input\r\n                  className=\"mt-1\"\r\n                  name=\"sellingPrice\"\r\n                  type=\"number\"\r\n                  step=\"0.01\"\r\n                  min=\"0\"\r\n                  value={formData.sellingPrice}\r\n                  onChange={handleInputChange}\r\n                  placeholder=\"0.00\"\r\n                  required\r\n                  valid={!errors.sellingPrice}\r\n                />\r\n                {errors.sellingPrice && (\r\n                  <HelperText valid={false}>{errors.sellingPrice}</HelperText>\r\n                )}\r\n              </Label>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex justify-end space-x-4 mt-6\">\r\n            <Button\r\n              type=\"button\"\r\n              layout=\"outline\"\r\n              onClick={handleCancel}\r\n              disabled={loading}\r\n            >\r\n              Cancel\r\n            </Button>\r\n            <Button\r\n              type=\"submit\"\r\n              style={{ backgroundColor: \"#AA1A21\" }}\r\n              className=\"text-white\"\r\n              disabled={loading}\r\n            >\r\n              {loading ? 'Creating...' : 'Create Product'}\r\n            </Button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default CreateProducts","import React from 'react'\r\n\r\nfunction PageTitle({ children }) {\r\n  return (\r\n    <h1 className=\"my-6 text-2xl font-semibold text-gray-700 dark:text-gray-200\">{children}</h1>\r\n  )\r\n}\r\n\r\nexport default PageTitle\r\n","import React from 'react'\r\n\r\nfunction SectionTitle({ children }) {\r\n  return <h2 className=\"mb-4 text-lg font-semibold text-gray-600 dark:text-gray-300\">{children}</h2>\r\n}\r\n\r\nexport default SectionTitle\r\n"],"sourceRoot":""}