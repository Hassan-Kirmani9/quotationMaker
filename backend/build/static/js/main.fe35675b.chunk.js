(this["webpackJsonpquotation-maker"]=this["webpackJsonpquotation-maker"]||[]).push([[3],{12:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return s});var o=n(1),r=n(13),c=n(3);const a=Object(o.createContext)(),i=()=>Object(o.useContext)(a),s=e=>{let{children:t}=e;const[n,i]=Object(o.useState)(!1),[s,l]=Object(o.useState)(null),[u,d]=Object(o.useState)(!0),[b,j]=Object(o.useState)(null);Object(o.useEffect)(()=>{const e=localStorage.getItem("token");e&&(i(!0),Object(r.b)("/auth/me",{},{headers:{Authorization:"Bearer ".concat(e)}}).then(e=>{l(e)}).catch(()=>{localStorage.removeItem("token"),i(!1)}));const t=async()=>{if(e)try{const t=await Object(r.b)("/configuration",{},{headers:{Authorization:"Bearer ".concat(e)}});Array.isArray(t.data)&&t.data.length>0&&j(t.data[0])}catch(t){console.error("Config fetch failed",t)}};t();const n=()=>{t()};return window.addEventListener("currencyUpdated",n),d(!1),()=>{window.removeEventListener("currencyUpdated",n)}},[]);return Object(c.jsx)(a.Provider,{value:{isAuthenticated:n,login:(e,t)=>{localStorage.setItem("token",e),i(!0),l(t)},logout:()=>{localStorage.removeItem("token"),i(!1),l(null)},user:s,loading:u,config:b},children:t})}},13:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"c",function(){return s}),n.d(t,"d",function(){return l}),n.d(t,"a",function(){return u});var o=n(5),r=n(49);let c;console.log("Running in Production Mode"),c="https://quotationmaker.onrender.com/api";const a=r.a.create({baseURL:c,headers:{"Content-Type":"application/json"}});a.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),a.interceptors.response.use(e=>e,async e=>{var t;return(e=>{var t,n,o,r,c;console.error("API Error:",{message:e.message,status:null===(t=e.response)||void 0===t?void 0:t.status,statusText:null===(n=e.response)||void 0===n?void 0:n.statusText,data:null===(o=e.response)||void 0===o?void 0:o.data,url:null===(r=e.config)||void 0===r?void 0:r.url,method:null===(c=e.config)||void 0===c?void 0:c.method})})(e),e.response&&401===e.response.status&&(window.location.href="/login"),Promise.reject((null===(t=e.response)||void 0===t?void 0:t.data)||e)});const i=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a.get(e,Object(o.a)({params:t},n)).then(e=>e.data)},s=async(e,t)=>a.post(e,t).then(e=>e.data),l=async(e,t)=>a.put(e,t).then(e=>e.data),u=async e=>a.delete(e).then(e=>e.data)},17:function(e,t,n){"use strict";n(1);var o=n(3);t.a=function(){return Object(o.jsx)("div",{className:"w-full h-screen p-6 text-lg font-medium text-gray-600 dark:text-gray-400 dark:bg-gray-900",children:"Loading..."})}},25:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return s});var o=n(1),r=n(13),c=n(3);const a=Object(o.createContext)(),i=()=>{const e=Object(o.useContext)(a);if(!e)throw new Error("useCurrency must be used within a CurrencyProvider");return e},s=e=>{let{children:t}=e;const[n,i]=Object(o.useState)("USD"),[s,l]=Object(o.useState)(!0),u={USD:"$",EUR:"\u20ac",GBP:"\xa3",PKR:"\u20a8",AED:"\u062f.\u0625",CAD:"C$",AUD:"A$",JPY:"\xa5",INR:"\u20b9",CHF:"Fr",SAR:"\ufdfc"},d=async()=>{try{l(!0);const n=localStorage.getItem("token");if(!n)return void l(!1);const o=await Object(r.b)("/configuration",{},{headers:{Authorization:"Bearer ".concat(n)}});if(o.success){var e,t;const n=o.data.configuration,r=(null===n||void 0===n||null===(e=n.quotation)||void 0===e?void 0:e.currency)||(null===n||void 0===n||null===(t=n.business)||void 0===t?void 0:t.currency);r&&i(r)}}catch(n){console.error("Error fetching currency from configuration:",n)}finally{l(!1)}};Object(o.useEffect)(()=>{d();const e=e=>{const t=e.detail.currency;t&&t!==n&&i(t)};return window.addEventListener("currencyUpdated",e),()=>{window.removeEventListener("currencyUpdated",e)}},[]);const b={currency:n,loading:s,formatCurrency:function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{const o=parseFloat(e)||0;return t?new Intl.NumberFormat(void 0,{style:"currency",currency:n,currencyDisplay:"symbol"}).format(o):o.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}catch(o){const r=u[n]||n,c=(parseFloat(e)||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2});return t?"".concat(r," ").concat(c):c}},getCurrencySymbol:()=>u[n]||n,updateCurrency:e=>{i(e)},refreshCurrency:()=>{d()},currencySymbols:u};return Object(c.jsx)(a.Provider,{value:b,children:t})}},26:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i});var o=n(1),r=n.n(o),c=n(3);const a=r.a.createContext(),i=e=>{let{children:t}=e;const[n,r]=Object(o.useState)(!1);function i(){r(!n)}function s(){r(!1)}const l=Object(o.useMemo)(()=>({isSidebarOpen:n,toggleSidebar:i,closeSidebar:s}),[n]);return Object(c.jsx)(a.Provider,{value:l,children:t})}},36:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var o=n(1),r=n(21),c=n.n(r),a=(n(36),n(4)),i=n(16),s=n(3);var l=function(){const[e,t]=Object(o.useState)(""),n=Object(a.h)();return Object(o.useEffect)(()=>{n.pathname.slice(1)?setTimeout(()=>t("Navigated to ".concat(n.pathname.slice(1)," page.")),500):t("")},[n]),Object(s.jsx)("span",{className:"sr-only",role:"status","aria-live":"polite","aria-atomic":"true",children:e})},u=n(12),d=n(5),b=n(28),j=n(17);const h=["component"];var g=e=>{let{component:t}=e,n=Object(b.a)(e,h);const{isAuthenticated:o,loading:r}=Object(u.b)();return r?Object(s.jsx)(j.a,{}):Object(s.jsx)(a.b,Object(d.a)(Object(d.a)({},n),{},{render:e=>o?Object(s.jsx)(t,Object(d.a)({},e)):Object(s.jsx)(a.a,{to:"/login"})}))},v=n(25);const f=Object(o.lazy)(()=>Promise.all([n.e(1),n.e(29)]).then(n.bind(null,218))),m=Object(o.lazy)(()=>n.e(27).then(n.bind(null,198))),p=Object(o.lazy)(()=>n.e(28).then(n.bind(null,199))),O=Object(o.lazy)(()=>Promise.all([n.e(1),n.e(30)]).then(n.bind(null,220))),y=Object(o.lazy)(()=>n.e(31).then(n.bind(null,221)));function x(){const{isAuthenticated:e,loading:t}=Object(u.b)();return t?Object(s.jsx)("div",{children:"Loading..."}):Object(s.jsxs)(a.d,{children:[Object(s.jsx)(a.b,{path:"/login",component:m}),Object(s.jsx)(a.b,{path:"/register",component:p}),Object(s.jsx)(a.b,{path:"/create-account",component:O}),Object(s.jsx)(a.b,{path:"/forgot-password",component:y}),Object(s.jsx)(g,{path:"/app",component:f}),Object(s.jsx)(a.b,{exact:!0,path:"/",children:e?Object(s.jsx)(a.a,{to:"/app"}):Object(s.jsx)(a.a,{to:"/login"})})]})}var w=function(){return Object(s.jsx)(u.a,{children:Object(s.jsx)(v.a,{children:Object(s.jsxs)(i.a,{children:[Object(s.jsx)(l,{}),Object(s.jsx)(x,{})]})})})},S=n(26),k=n(24);const A=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function C(e,t){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=()=>{const n=e.installing;null!=n&&(n.onstatechange=()=>{"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(e=>{console.error("Error during service worker registration:",e)})}c.a.render(Object(s.jsx)(S.b,{children:Object(s.jsx)(o.Suspense,{fallback:Object(s.jsx)(j.a,{}),children:Object(s.jsx)(k.Windmill,{usePreferences:!0,children:Object(s.jsx)(w,{})})})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",()=>{const t="".concat("","/service-worker.js");A?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then(n=>{const o=n.headers.get("content-type");404===n.status||null!=o&&-1===o.indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):C(e,t)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):C(t,e)})}}()}},[[48,4,6]]]);
//# sourceMappingURL=main.fe35675b.chunk.js.map