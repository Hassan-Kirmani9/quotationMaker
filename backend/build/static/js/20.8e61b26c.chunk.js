(this["webpackJsonpquotation-maker"]=this["webpackJsonpquotation-maker"]||[]).push([[20],{204:function(e,s,t){"use strict";t.r(s);var a=t(5),l=t(1),c=t(4),i=t(13),n=t(51),r=t(24),d=t(53),b=t(58),j=t(3);s.default=function(){const e=Object(c.g)(),[s,t]=Object(l.useState)(1),[o,m]=Object(l.useState)([]),[x,h]=Object(l.useState)(!0),[u,O]=Object(l.useState)(""),[N,p]=Object(l.useState)(0),[g,y]=Object(l.useState)(0),[v,C]=Object(l.useState)(!1),[f,k]=Object(l.useState)(null),[w,T]=Object(l.useState)({name:"",businessName:"",email:"",address:"",mobileNo:"",businessNo:"",city:"",country:""}),[A,S]=Object(l.useState)(!1),[B,E]=Object(l.useState)({}),[q,F]=Object(l.useState)(""),[I,P]=Object(l.useState)(""),H=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{h(!0),O("");const t=new URLSearchParams({page:e.toString(),limit:10..toString()});s&&t.append("search",s);const a=await Object(i.b)("/clients?".concat(t.toString()));a.success?(m(a.data.clients),p(a.data.pagination.total),y(a.data.pagination.pages)):O(a.message||"Failed to fetch clients")}catch(u){var t,a;O((null===(t=u.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||u.message||"Failed to fetch clients"),console.error("Error fetching clients:",u)}finally{h(!1)}},L=async(e,t)=>{if(window.confirm("Are you sure you want to delete ".concat(t,"? This action cannot be undone.")))try{const t=await Object(i.a)("/clients/".concat(e));t.success?(H(s,I),alert("Client deleted successfully")):alert(t.message||"Failed to delete client")}catch(u){var a,l;alert((null===(a=u.response)||void 0===a||null===(l=a.data)||void 0===l?void 0:l.message)||u.message||"Failed to delete client"),console.error("Error deleting client:",u)}},M=e=>{k(e),T({name:e.name,businessName:e.businessName,email:e.email,address:e.address,mobileNo:e.mobileNo,businessNo:e.businessNo||"",city:e.city,country:e.country}),E({}),F(""),C(!0)},R=e=>{const{name:s,value:t}=e.target;T(e=>Object(a.a)(Object(a.a)({},e),{},{[s]:t})),B[s]&&E(e=>Object(a.a)(Object(a.a)({},e),{},{[s]:""})),q&&F("")},U=async e=>{if(e.preventDefault(),(()=>{const e={};return w.name.trim()||(e.name="Client name is required"),w.businessName.trim()||(e.businessName="Business name is required"),w.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(w.email)||(e.email="Please enter a valid email address"):e.email="Email is required",w.address.trim()||(e.address="Address is required"),w.mobileNo.trim()||(e.mobileNo="Mobile number is required"),w.city.trim()||(e.city="City is required"),w.country.trim()||(e.country="Country is required"),E(e),0===Object.keys(e).length})()){S(!0),F("");try{const e=await Object(i.d)("/clients/".concat(f._id),w);e.success?(alert("Client updated successfully!"),_(),H(s,I)):F(e.message||"Failed to update client. Please try again.")}catch(u){var t,a;console.error("Error updating client:",u),null!==(t=u.response)&&void 0!==t&&null!==(a=t.data)&&void 0!==a&&a.message?F(u.response.data.message):u.message?F(u.message):F("Failed to update client. Please check your connection and try again.")}finally{S(!1)}}},_=()=>{C(!1),k(null),T({name:"",businessName:"",email:"",address:"",mobileNo:"",businessNo:"",city:"",country:""}),E({}),F("")};function z(e){t(e),H(e,I)}return Object(l.useEffect)(()=>{H(1,"")},[]),x?Object(j.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:Object(j.jsxs)("div",{className:"text-center",children:[Object(j.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-purple-600"}),Object(j.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading clients..."})]})}):u?Object(j.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:Object(j.jsxs)("div",{className:"text-center",children:[Object(j.jsx)("div",{className:"text-red-500 text-xl mb-4",children:u}),Object(j.jsx)(r.Button,{onClick:()=>H(1,""),style:{backgroundColor:"#AA1A21"},className:"text-white",children:"Retry"})]})}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[Object(j.jsx)(n.a,{children:"Clients"}),Object(j.jsx)(r.Button,{style:{backgroundColor:"#AA1A21"},className:"text-white",onClick:()=>e.push("/app/clients/create"),children:"Add Client"})]}),Object(j.jsx)("div",{className:"mb-4",children:Object(j.jsx)(r.Input,{placeholder:"Search clients by name, business name, email, or city...",value:I,onChange:e=>{const s=e.target.value;P(s),t(1);const a=setTimeout(()=>{H(1,s)},500);return()=>clearTimeout(a)},className:"w-full md:w-1/3"})}),0!==o.length||I?0===o.length&&I?Object(j.jsxs)("div",{className:"text-center py-12",children:[Object(j.jsxs)("p",{className:"text-gray-600 text-lg mb-4",children:['No clients found for "',I,'"']}),Object(j.jsx)(r.Button,{layout:"outline",onClick:()=>{P(""),H(1,"")},children:"Clear Search"})]}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:"hidden md:block",children:Object(j.jsxs)(r.TableContainer,{className:"mb-8",children:[Object(j.jsxs)(r.Table,{children:[Object(j.jsx)(r.TableHeader,{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)(r.TableCell,{children:"Name"}),Object(j.jsx)(r.TableCell,{children:"Business Name"}),Object(j.jsx)(r.TableCell,{children:"Email"}),Object(j.jsx)(r.TableCell,{children:"Phone"}),Object(j.jsx)(r.TableCell,{children:"City"}),Object(j.jsx)(r.TableCell,{children:"Country"}),Object(j.jsx)(r.TableCell,{children:"Actions"})]})}),Object(j.jsx)(r.TableBody,{children:o.map(e=>Object(j.jsxs)(r.TableRow,{children:[Object(j.jsx)(r.TableCell,{children:Object(j.jsx)("div",{className:"flex items-center text-sm",children:Object(j.jsx)("div",{children:Object(j.jsx)("p",{className:"font-semibold",children:e.name})})})}),Object(j.jsx)(r.TableCell,{children:Object(j.jsx)("span",{className:"text-sm",children:e.businessName})}),Object(j.jsx)(r.TableCell,{children:Object(j.jsx)("span",{className:"text-sm",children:e.email})}),Object(j.jsx)(r.TableCell,{children:Object(j.jsxs)("div",{className:"text-sm",children:[Object(j.jsx)("div",{children:e.mobileNo}),e.businessNo&&Object(j.jsxs)("div",{className:"text-gray-500 text-xs",children:["Business: ",e.businessNo]})]})}),Object(j.jsx)(r.TableCell,{children:Object(j.jsx)("span",{className:"text-sm",children:e.city})}),Object(j.jsx)(r.TableCell,{children:Object(j.jsx)("span",{className:"text-sm",children:e.country})}),Object(j.jsx)(r.TableCell,{children:Object(j.jsxs)("div",{className:"flex items-center space-x-4",children:[Object(j.jsx)(r.Button,{layout:"link",size:"icon","aria-label":"Edit",onClick:()=>M(e),children:Object(j.jsx)(d.EditIcon,{className:"w-5 h-5","aria-hidden":"true"})}),Object(j.jsx)(r.Button,{layout:"link",size:"icon","aria-label":"Delete",onClick:()=>L(e._id,e.name),children:Object(j.jsx)(d.TrashIcon,{className:"w-5 h-5","aria-hidden":"true"})})]})})]},e._id))})]}),g>1&&Object(j.jsx)(r.TableFooter,{children:Object(j.jsx)(r.Pagination,{totalResults:N,resultsPerPage:10,onChange:z,label:"Table navigation"})})]})}),Object(j.jsxs)("div",{className:"block md:hidden",children:[Object(j.jsx)("div",{className:"space-y-4 mb-8",children:o.map(e=>Object(j.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4 shadow-sm border border-blue-200 relative",children:[Object(j.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[Object(j.jsx)("h3",{className:"text-gray-800 font-semibold text-lg leading-tight",children:e.name}),Object(j.jsxs)("div",{className:"flex space-x-2",children:[Object(j.jsx)("button",{onClick:()=>M(e),className:"bg-white border border-gray-300 rounded-lg p-2 hover:bg-gray-50 transition-colors","aria-label":"Edit",children:Object(j.jsx)(b.p,{className:"w-4 h-4 text-gray-600"})}),Object(j.jsx)("button",{onClick:()=>L(e._id,e.name),className:"bg-white border border-gray-300 rounded-lg p-2 hover:bg-gray-50 transition-colors","aria-label":"Delete",children:Object(j.jsx)(b.w,{className:"w-4 h-4 text-gray-600"})})]})]}),Object(j.jsxs)("div",{className:"flex items-center mb-3 text-gray-600",children:[Object(j.jsx)(b.e,{className:"w-4 h-4 mr-2 flex-shrink-0"}),Object(j.jsx)("span",{className:"text-sm font-medium",children:e.businessName})]}),Object(j.jsxs)("div",{className:"flex items-center mb-3 text-gray-600",children:[Object(j.jsx)(b.o,{className:"w-4 h-4 mr-2 flex-shrink-0"}),Object(j.jsx)("span",{className:"text-sm break-all",children:e.email})]}),Object(j.jsxs)("div",{className:"flex items-center mb-3 text-gray-600",children:[Object(j.jsx)(b.g,{className:"w-4 h-4 mr-2 flex-shrink-0"}),Object(j.jsxs)("div",{className:"text-sm",children:[Object(j.jsx)("div",{children:e.mobileNo}),e.businessNo&&Object(j.jsxs)("div",{className:"text-gray-500 text-xs mt-1",children:["Business: ",e.businessNo]})]})]}),Object(j.jsxs)("div",{className:"flex items-center mb-3 text-gray-600",children:[Object(j.jsx)(b.n,{className:"w-4 h-4 mr-2 flex-shrink-0"}),Object(j.jsxs)("span",{className:"text-sm",children:[e.city,", ",e.country]})]}),Object(j.jsxs)("div",{className:"flex items-start text-gray-600",children:[Object(j.jsx)(b.m,{className:"w-4 h-4 mr-2 flex-shrink-0 mt-0.5"}),Object(j.jsx)("span",{className:"text-sm",children:e.address})]})]},e._id))}),g>1&&Object(j.jsx)("div",{className:"flex justify-center",children:Object(j.jsx)(r.Pagination,{totalResults:N,resultsPerPage:10,onChange:z,label:"Table navigation"})})]})]}):Object(j.jsxs)("div",{className:"text-center py-12",children:[Object(j.jsx)("p",{className:"text-gray-600 text-lg mb-4",children:"No clients found"}),Object(j.jsx)(r.Button,{style:{backgroundColor:"#AA1A21"},className:"text-white",onClick:()=>e.push("/app/clients/create"),children:"Create Your First Client"})]}),Object(j.jsxs)(r.Modal,{isOpen:v,onClose:_,children:[Object(j.jsx)(r.ModalHeader,{children:"Edit Client"}),Object(j.jsx)(r.ModalBody,{children:Object(j.jsxs)("form",{onSubmit:U,children:[q&&Object(j.jsx)("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:q}),Object(j.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Object(j.jsxs)(r.Label,{children:[Object(j.jsx)("span",{children:"Name *"}),Object(j.jsx)(r.Input,{className:"mt-1",name:"name",value:w.name,onChange:R,placeholder:"Enter client name",required:!0,valid:!B.name}),B.name&&Object(j.jsx)(r.HelperText,{valid:!1,children:B.name})]}),Object(j.jsxs)(r.Label,{children:[Object(j.jsx)("span",{children:"Business Name *"}),Object(j.jsx)(r.Input,{className:"mt-1",name:"businessName",value:w.businessName,onChange:R,placeholder:"Enter business name",required:!0,valid:!B.businessName}),B.businessName&&Object(j.jsx)(r.HelperText,{valid:!1,children:B.businessName})]}),Object(j.jsxs)(r.Label,{className:"md:col-span-2",children:[Object(j.jsx)("span",{children:"Email *"}),Object(j.jsx)(r.Input,{className:"mt-1",name:"email",type:"email",value:w.email,onChange:R,placeholder:"Enter email address",required:!0,valid:!B.email}),B.email&&Object(j.jsx)(r.HelperText,{valid:!1,children:B.email})]}),Object(j.jsxs)(r.Label,{className:"md:col-span-2",children:[Object(j.jsx)("span",{children:"Address *"}),Object(j.jsx)(r.Input,{className:"mt-1",name:"address",value:w.address,onChange:R,placeholder:"Enter complete address",required:!0,valid:!B.address}),B.address&&Object(j.jsx)(r.HelperText,{valid:!1,children:B.address})]}),Object(j.jsxs)(r.Label,{children:[Object(j.jsx)("span",{children:"Mobile No *"}),Object(j.jsx)(r.Input,{className:"mt-1",name:"mobileNo",value:w.mobileNo,onChange:R,placeholder:"+1-555-0123",required:!0,valid:!B.mobileNo}),B.mobileNo&&Object(j.jsx)(r.HelperText,{valid:!1,children:B.mobileNo})]}),Object(j.jsxs)(r.Label,{children:[Object(j.jsx)("span",{children:"Business No"}),Object(j.jsx)(r.Input,{className:"mt-1",name:"businessNo",value:w.businessNo,onChange:R,placeholder:"+1-555-0124 (Optional)",valid:!B.businessNo}),B.businessNo&&Object(j.jsx)(r.HelperText,{valid:!1,children:B.businessNo})]}),Object(j.jsxs)(r.Label,{children:[Object(j.jsx)("span",{children:"City *"}),Object(j.jsx)(r.Input,{className:"mt-1",name:"city",value:w.city,onChange:R,placeholder:"Enter city",required:!0,valid:!B.city}),B.city&&Object(j.jsx)(r.HelperText,{valid:!1,children:B.city})]}),Object(j.jsxs)(r.Label,{children:[Object(j.jsx)("span",{children:"Country *"}),Object(j.jsx)(r.Input,{className:"mt-1",name:"country",value:w.country,onChange:R,placeholder:"Enter country",required:!0,valid:!B.country}),B.country&&Object(j.jsx)(r.HelperText,{valid:!1,children:B.country})]})]})]})}),Object(j.jsxs)(r.ModalFooter,{children:[Object(j.jsx)("div",{className:"hidden sm:block",children:Object(j.jsx)(r.Button,{layout:"outline",onClick:_,disabled:A,children:"Cancel"})}),Object(j.jsx)("div",{className:"hidden sm:block",children:Object(j.jsx)(r.Button,{onClick:U,style:{backgroundColor:"#AA1A21"},className:"text-white",disabled:A,children:A?"Updating...":"Update Client"})}),Object(j.jsx)("div",{className:"block w-full sm:hidden",children:Object(j.jsx)(r.Button,{block:!0,size:"large",onClick:U,style:{backgroundColor:"#AA1A21"},className:"text-white",disabled:A,children:A?"Updating...":"Update Client"})})]})]})]})}},51:function(e,s,t){"use strict";t(1);var a=t(3);s.a=function(e){let{children:s}=e;return Object(a.jsx)("h1",{className:"my-6 text-2xl font-semibold text-gray-700 dark:text-gray-200",children:s})}}}]);
//# sourceMappingURL=20.8e61b26c.chunk.js.map