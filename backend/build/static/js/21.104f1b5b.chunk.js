(this["webpackJsonpquotation-maker"]=this["webpackJsonpquotation-maker"]||[]).push([[21],{208:function(e,t,a){"use strict";a.r(t);var n=a(5),s=a(1),i=a(4),l=a(13),o=a(24),c=a(51),r=a(3);t.default=function(){const e=Object(i.g)(),[t,a]=Object(s.useState)(null),[u,d]=Object(s.useState)({bankName:"",accountName:"",accountNumber:"",routingNumber:"",businessName:"",address:"",mobileNum:"",businessNum:"",email:"",web:"",logo:"",taxId:"",validity:30,terms:"",notes:"",prefix:"QUO",currency:"USD"}),[b,j]=Object(s.useState)(!0),[m,x]=Object(s.useState)(!1),[h,g]=Object(s.useState)(""),[p,O]=Object(s.useState)(null),[v,f]=Object(s.useState)("");Object(s.useEffect)(()=>{!async function(){j(!0);try{const j=await Object(l.b)("/configuration");if(j.success){var e,t,n,s,i,o,c,r,u,b,m,x,h,p,O,v,N,y;const l=j.data.configuration;a(l),d({bankName:(null===(e=l.bank)||void 0===e?void 0:e.name)||"",accountName:(null===(t=l.bank)||void 0===t?void 0:t.accountName)||"",accountNumber:(null===(n=l.bank)||void 0===n?void 0:n.accountNumber)||"",routingNumber:(null===(s=l.bank)||void 0===s?void 0:s.routingNumber)||"",businessName:(null===(i=l.business)||void 0===i?void 0:i.name)||"",address:(null===(o=l.business)||void 0===o?void 0:o.address)||"",mobileNum:(null===(c=l.business)||void 0===c?void 0:c.mobileNum)||"",businessNum:(null===(r=l.business)||void 0===r?void 0:r.businessNum)||"",email:(null===(u=l.business)||void 0===u?void 0:u.email)||"",web:(null===(b=l.business)||void 0===b?void 0:b.web)||"",taxId:(null===(m=l.business)||void 0===m?void 0:m.taxId)||"",validity:(null===(x=l.quotation)||void 0===x?void 0:x.validity)||30,terms:(null===(h=l.quotation)||void 0===h?void 0:h.terms)||"",notes:(null===(p=l.quotation)||void 0===p?void 0:p.notes)||"",prefix:(null===(O=l.quotation)||void 0===O?void 0:O.prefix)||"QUO",currency:(null===(v=l.quotation)||void 0===v?void 0:v.currency)||(null===(N=l.business)||void 0===N?void 0:N.currency)}),f(null!==(y=l.business)&&void 0!==y&&y.logo?"http://localhost:5000".concat(l.business.logo):"")}}catch(k){console.error(k),g("Failed to load configuration")}finally{j(!1)}}()},[]);const N=e=>{const{name:t,value:a}=e.target;d(e=>Object(n.a)(Object(n.a)({},e),{},{[t]:a})),h&&g("")};return b?Object(r.jsx)(c.a,{children:"Loading..."}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[Object(r.jsx)(c.a,{children:"Configuration"}),Object(r.jsx)(o.Button,{onClick:()=>e.push("/app/quotations"),children:"Quotations"})]}),Object(r.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg",children:[Object(r.jsx)("h3",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-gray-200",children:"Bank Information"}),Object(r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[Object(r.jsxs)(o.Label,{children:[Object(r.jsx)("span",{children:"Bank Name"}),Object(r.jsx)(o.Input,{name:"bankName",value:u.bankName,onChange:N})]}),Object(r.jsxs)(o.Label,{children:[Object(r.jsx)("span",{children:"Account Name"}),Object(r.jsx)(o.Input,{name:"accountName",value:u.accountName,onChange:N})]}),Object(r.jsxs)(o.Label,{children:[Object(r.jsx)("span",{children:"Account Number"}),Object(r.jsx)(o.Input,{name:"accountNumber",value:u.accountNumber,onChange:N})]}),Object(r.jsxs)(o.Label,{children:[Object(r.jsx)("span",{children:"Routing Number"}),Object(r.jsx)(o.Input,{name:"routingNumber",value:u.routingNumber,onChange:N})]})]}),Object(r.jsx)("h3",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-gray-200",children:"Business Information"}),Object(r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[Object(r.jsxs)(o.Label,{children:[Object(r.jsx)("span",{children:"Business Name"}),Object(r.jsx)(o.Input,{name:"businessName",value:u.businessName,onChange:N})]}),Object(r.jsxs)(o.Label,{children:[Object(r.jsx)("span",{children:"Business Address"}),Object(r.jsx)(o.Input,{name:"address",value:u.address,onChange:N})]}),Object(r.jsxs)(o.Label,{children:[Object(r.jsx)("span",{children:"Mobile Number"}),Object(r.jsx)(o.Input,{name:"mobileNum",value:u.mobileNum,onChange:N})]}),Object(r.jsxs)(o.Label,{children:[Object(r.jsx)("span",{children:"Business Number"}),Object(r.jsx)(o.Input,{name:"businessNum",value:u.businessNum,onChange:N})]}),Object(r.jsxs)(o.Label,{children:[Object(r.jsx)("span",{children:"Email"}),Object(r.jsx)(o.Input,{name:"email",value:u.email,onChange:N,type:"email"})]}),Object(r.jsxs)(o.Label,{children:[Object(r.jsx)("span",{children:"Website URL"}),Object(r.jsx)(o.Input,{name:"web",value:u.web,onChange:N})]}),Object(r.jsxs)(o.Label,{children:[Object(r.jsx)("span",{children:"Business Logo"}),Object(r.jsx)("input",{id:"logo-upload",type:"file",accept:"image/*",onChange:e=>{const t=e.target.files[0];if(t){if(t.size>5242880)return void g("Logo file size should be less than 5MB");O(t);const e=new FileReader;e.onload=e=>{f(e.target.result)},e.readAsDataURL(t),h&&g("")}},className:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100 dark:file:bg-gray-700 dark:file:text-gray-300"}),Object(r.jsx)(o.HelperText,{children:"Upload an image file (max 5MB)"})]}),Object(r.jsxs)(o.Label,{children:[Object(r.jsx)("span",{children:"Tax ID"}),Object(r.jsx)(o.Input,{name:"taxId",value:u.taxId,onChange:N})]}),Object(r.jsxs)(o.Label,{children:[Object(r.jsx)("span",{children:"Default Currency *"}),Object(r.jsxs)(o.Select,{className:"mt-1",name:"currency",value:u.currency,onChange:N,required:!0,children:[Object(r.jsx)("option",{value:"USD",children:"USD - US Dollar"}),Object(r.jsx)("option",{value:"EUR",children:"EUR - Euro"}),Object(r.jsx)("option",{value:"GBP",children:"GBP - British Pound"}),Object(r.jsx)("option",{value:"AED",children:"AED - UAE Dirham"}),Object(r.jsx)("option",{value:"PKR",children:"PKR - Pakistani Rupee"}),Object(r.jsx)("option",{value:"CAD",children:"CAD - Canadian Dollar"}),Object(r.jsx)("option",{value:"AUD",children:"AUD - Australian Dollar"}),Object(r.jsx)("option",{value:"JPY",children:"JPY - Japanese Yen"}),Object(r.jsx)("option",{value:"INR",children:"INR - Indian Rupee"}),Object(r.jsx)("option",{value:"SAR",children:"SAR - Saudi Riyal"})]}),Object(r.jsx)(o.HelperText,{children:"Currency for all quotations and pricing"})]}),v&&Object(r.jsx)("div",{className:"md:col-span-2",children:Object(r.jsxs)("div",{className:"flex items-center gap-4",children:[Object(r.jsx)("img",{src:(y=v,y?y.startsWith("http")?y:"http://localhost:5000".concat(y):""),alt:"Logo Preview",className:"h-20 mt-2 object-contain rounded border",onError:e=>{console.error("Image failed to load:",e.target.src),e.target.style.display="none"}}),Object(r.jsx)(o.Button,{type:"button",onClick:()=>{O(null),f(""),document.getElementById("logo-upload").value=""},className:"bg-red-500 hover:bg-red-600 text-white text-sm px-3 py-1 rounded",children:"Remove Logo"})]})})]}),Object(r.jsx)("h3",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-gray-200",children:"Quotation Settings"}),Object(r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Object(r.jsxs)(o.Label,{children:[Object(r.jsx)("span",{children:"Quotation Validity (Days)"}),Object(r.jsx)(o.Input,{name:"validity",value:u.validity,onChange:N,type:"number",min:"1",max:"365"}),Object(r.jsx)(o.HelperText,{children:"How many days quotations remain valid"})]}),Object(r.jsxs)(o.Label,{children:[Object(r.jsx)("span",{children:"Quotation Prefix"}),Object(r.jsx)(o.Input,{name:"prefix",value:u.prefix,onChange:N}),Object(r.jsx)(o.HelperText,{children:"Prefix for quotation numbers (e.g., QUO-202409-0001)"})]}),Object(r.jsxs)(o.Label,{className:"md:col-span-2",children:[Object(r.jsx)("span",{children:"Terms & Conditions"}),Object(r.jsx)("textarea",{name:"terms",value:u.terms,onChange:N,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-purple-300 focus:ring focus:ring-purple-200 focus:ring-opacity-50 dark:border-gray-600 dark:bg-gray-700 dark:text-white",rows:"4",placeholder:"Enter default terms and conditions for quotations..."})]}),Object(r.jsxs)(o.Label,{className:"md:col-span-2",children:[Object(r.jsx)("span",{children:"Default Notes"}),Object(r.jsx)("textarea",{name:"notes",value:u.notes,onChange:N,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-purple-300 focus:ring focus:ring-purple-200 focus:ring-opacity-50 dark:border-gray-600 dark:bg-gray-700 dark:text-white",rows:"3",placeholder:"Enter default notes for quotations..."})]})]}),h&&Object(r.jsx)(o.HelperText,{valid:!1,className:"mt-4",children:h}),Object(r.jsx)("div",{className:"mt-6",children:Object(r.jsx)(o.Button,{onClick:async()=>{x(!0),g("");try{let e=v;if(p){const t=new FormData;t.append("logo",p);try{const a=await Object(l.e)("/configuration/upload-logo",t);if(!a.success)throw new Error(a.message||"Logo upload failed");e=a.logoUrl}catch(n){return g("Failed to upload logo: "+n.message),void x(!1)}}const t={bank:{name:u.bankName,accountName:u.accountName,accountNumber:u.accountNumber,routingNumber:u.routingNumber},business:{name:u.businessName,address:u.address,mobileNum:u.mobileNum,businessNum:u.businessNum,email:u.email,web:u.web,logo:e,taxId:u.taxId,currency:u.currency},quotation:{validity:Number(u.validity),terms:u.terms,notes:u.notes,prefix:u.prefix,currency:u.currency}},s=await Object(l.d)("/configuration",t);s.success?(a(s.data.configuration),alert("Configuration saved successfully"),window.dispatchEvent(new CustomEvent("currencyUpdated",{detail:{currency:u.currency}}))):g(s.message||"Save failed")}catch(s){var e,t;g((null===(e=s.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||s.message||"Save failed"),console.error(s)}finally{x(!1)}},style:{backgroundColor:"#AA1A21"},className:"text-white",disabled:m,children:m?"Saving...":t?"Update Configuration":"Save Configuration"})})]})]});var y}},51:function(e,t,a){"use strict";a(1);var n=a(3);t.a=function(e){let{children:t}=e;return Object(n.jsx)("h1",{className:"my-6 text-2xl font-semibold text-gray-700 dark:text-gray-200",children:t})}}}]);
//# sourceMappingURL=21.104f1b5b.chunk.js.map