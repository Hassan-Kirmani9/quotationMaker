(this["webpackJsonpquotation-maker"]=this["webpackJsonpquotation-maker"]||[]).push([[28],{211:function(e,t,a){"use strict";a.r(t);var s=a(5),c=a(1),l=a(13),n=a(51),i=a(24),r=a(53),d=a(58),o=a(3);t.default=function(){const[e,t]=Object(c.useState)(1),[a,j]=Object(c.useState)([]),[b,m]=Object(c.useState)(!0),[h,x]=Object(c.useState)(""),[u,O]=Object(c.useState)(0),[g,v]=Object(c.useState)(0),[p,N]=Object(c.useState)(""),[y,f]=Object(c.useState)(!1),[k,C]=Object(c.useState)({name:""}),[z,S]=Object(c.useState)(!1),[w,A]=Object(c.useState)({}),[T,B]=Object(c.useState)(""),[F,P]=Object(c.useState)(!1),[E,D]=Object(c.useState)(null),[L,M]=Object(c.useState)({name:""}),[q,H]=Object(c.useState)(!1),[I,R]=Object(c.useState)({}),[U,_]=Object(c.useState)(""),J=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{m(!0),x("");const a=new URLSearchParams({page:e.toString(),limit:10..toString()});t&&a.append("search",t);const s=await Object(l.b)("/sizes/?".concat(a.toString()));s.success?(j(s.data.sizes),O(s.data.pagination.total),v(s.data.pagination.pages)):x(s.message||"Failed to fetch sizes")}catch(h){var a,s;x((null===(a=h.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message)||h.message||"Failed to fetch sizes"),console.error("Error fetching sizes:",h)}finally{m(!1)}},Y=async(t,a)=>{if(window.confirm('Are you sure you want to delete "'.concat(a,'"? This action cannot be undone.')))try{const a=await Object(l.a)("/sizes/".concat(t));a.success?(J(e,p),alert("Size deleted successfully")):alert(a.message||"Failed to delete size")}catch(h){var s,c;alert((null===(s=h.response)||void 0===s||null===(c=s.data)||void 0===c?void 0:c.message)||h.message||"Failed to delete size"),console.error("Error deleting size:",h)}},G=()=>{C({name:""}),A({}),B(""),f(!0)},K=()=>{f(!1),C({name:""}),A({}),B("")},Q=async t=>{if(t.preventDefault(),(()=>{const e={};return k.name.trim()?k.name.length>50&&(e.name="Size name cannot exceed 50 characters"):e.name="Size name is required",A(e),0===Object.keys(e).length})()){S(!0),B("");try{const t={name:k.name.trim()},a=await Object(l.c)("/sizes",t);a.success?(alert("Size created successfully!"),K(),J(e,p)):B(a.message||"Failed to create size. Please try again.")}catch(h){var a,s;console.error("Error creating size:",h),null!==(a=h.response)&&void 0!==a&&null!==(s=a.data)&&void 0!==s&&s.message?B(h.response.data.message):h.message?B(h.message):B("Failed to create size. Please check your connection and try again.")}finally{S(!1)}}},V=e=>{D(e),M({name:e.name}),R({}),_(""),P(!0)},W=()=>{P(!1),D(null),M({name:""}),R({}),_("")},X=async t=>{if(t.preventDefault(),(()=>{const e={};return L.name.trim()?L.name.length>50&&(e.name="Size name cannot exceed 50 characters"):e.name="Size name is required",R(e),0===Object.keys(e).length})()){H(!0),_("");try{const t={name:L.name.trim()},a=await Object(l.d)("/sizes/".concat(E._id),t);a.success?(alert("Size updated successfully!"),W(),J(e,p)):_(a.message||"Failed to update size. Please try again.")}catch(h){var a,s;console.error("Error updating size:",h),null!==(a=h.response)&&void 0!==a&&null!==(s=a.data)&&void 0!==s&&s.message?_(h.response.data.message):h.message?_(h.message):_("Failed to update size. Please check your connection and try again.")}finally{H(!1)}}},Z=e=>{t(e),J(e,p)};return Object(c.useEffect)(()=>{J(1,"")},[]),b?Object(o.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:Object(o.jsxs)("div",{className:"text-center",children:[Object(o.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-purple-600"}),Object(o.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading sizes..."})]})}):h?Object(o.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:Object(o.jsxs)("div",{className:"text-center",children:[Object(o.jsx)("div",{className:"text-red-500 text-xl mb-4",children:h}),Object(o.jsx)(i.Button,{onClick:()=>J(1,""),style:{backgroundColor:"#AA1A21"},className:"text-white",children:"Retry"})]})}):Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[Object(o.jsx)(n.a,{children:"Sizes"}),Object(o.jsxs)(i.Button,{style:{backgroundColor:"#AA1A21"},className:"text-white",onClick:G,children:[Object(o.jsx)(d.a,{className:"w-4 h-4 mr-2"}),"Add Size"]})]}),Object(o.jsx)("div",{className:"mb-4",children:Object(o.jsx)(i.Input,{placeholder:"Search sizes by name...",value:p,onChange:e=>{const a=e.target.value;N(a),t(1);const s=setTimeout(()=>{J(1,a)},500);return()=>clearTimeout(s)},className:"w-full md:w-1/3"})}),0!==a.length||p?0===a.length&&p?Object(o.jsxs)("div",{className:"text-center py-12",children:[Object(o.jsxs)("p",{className:"text-gray-600 text-lg mb-4",children:['No sizes found for "',p,'"']}),Object(o.jsx)(i.Button,{layout:"outline",onClick:()=>{N(""),J(1,"")},children:"Clear Search"})]}):Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{className:"hidden md:block",children:Object(o.jsxs)(i.TableContainer,{className:"mb-8",children:[Object(o.jsxs)(i.Table,{children:[Object(o.jsx)(i.TableHeader,{children:Object(o.jsxs)("tr",{children:[Object(o.jsx)(i.TableCell,{children:"Size Name"}),Object(o.jsx)(i.TableCell,{children:"Created"}),Object(o.jsx)(i.TableCell,{children:"Actions"})]})}),Object(o.jsx)(i.TableBody,{children:a.map(e=>Object(o.jsxs)(i.TableRow,{children:[Object(o.jsx)(i.TableCell,{children:Object(o.jsx)("div",{className:"flex items-center text-sm",children:Object(o.jsx)("div",{children:Object(o.jsx)("p",{className:"font-semibold",children:e.name})})})}),Object(o.jsx)(i.TableCell,{children:Object(o.jsx)("span",{className:"text-sm",children:new Date(e.createdAt).toLocaleDateString()})}),Object(o.jsx)(i.TableCell,{children:Object(o.jsxs)("div",{className:"flex items-center space-x-4",children:[Object(o.jsx)(i.Button,{layout:"link",size:"icon","aria-label":"Edit",onClick:()=>V(e),children:Object(o.jsx)(r.EditIcon,{className:"w-5 h-5","aria-hidden":"true"})}),Object(o.jsx)(i.Button,{layout:"link",size:"icon","aria-label":"Delete",onClick:()=>Y(e._id,e.name),children:Object(o.jsx)(r.TrashIcon,{className:"w-5 h-5","aria-hidden":"true"})})]})})]},e._id))})]}),g>1&&Object(o.jsx)(i.TableFooter,{children:Object(o.jsx)(i.Pagination,{totalResults:u,resultsPerPage:10,onChange:Z,label:"Table navigation"})})]})}),Object(o.jsxs)("div",{className:"block md:hidden",children:[Object(o.jsx)("div",{className:"space-y-4 mb-8",children:a.map(e=>Object(o.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-4 shadow-sm border border-purple-200 relative",children:[Object(o.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[Object(o.jsx)("h3",{className:"text-gray-800 font-semibold text-lg leading-tight flex-1 pr-4",children:e.name}),Object(o.jsxs)("div",{className:"flex space-x-2 flex-shrink-0",children:[Object(o.jsx)("button",{onClick:()=>V(e),className:"bg-white border border-gray-300 rounded-lg p-2 hover:bg-gray-50 transition-colors","aria-label":"Edit",children:Object(o.jsx)(d.p,{className:"w-4 h-4 text-gray-600"})}),Object(o.jsx)("button",{onClick:()=>Y(e._id,e.name),className:"bg-white border border-gray-300 rounded-lg p-2 hover:bg-gray-50 transition-colors","aria-label":"Delete",children:Object(o.jsx)(d.w,{className:"w-4 h-4 text-gray-600"})})]})]}),Object(o.jsxs)("div",{className:"flex items-center",children:[Object(o.jsx)(d.v,{className:"w-4 h-4 mr-2 text-purple-600"}),Object(o.jsxs)("div",{className:"text-sm text-gray-600",children:["Created: ",new Date(e.createdAt).toLocaleDateString()]})]})]},e._id))}),g>1&&Object(o.jsx)("div",{className:"flex justify-center",children:Object(o.jsx)(i.Pagination,{totalResults:u,resultsPerPage:10,onChange:Z,label:"Table navigation"})})]})]}):Object(o.jsxs)("div",{className:"text-center py-12",children:[Object(o.jsx)("p",{className:"text-gray-600 text-lg mb-4",children:"No sizes found"}),Object(o.jsxs)(i.Button,{style:{backgroundColor:"#AA1A21"},className:"text-white",onClick:G,children:[Object(o.jsx)(d.a,{className:"w-4 h-4 mr-2"}),"Create Your First Size"]})]}),Object(o.jsxs)(i.Modal,{isOpen:y,onClose:K,children:[Object(o.jsx)(i.ModalHeader,{children:"Create New Size"}),Object(o.jsx)(i.ModalBody,{className:"max-h-[60vh] sm:max-h-[70vh] overflow-y-auto",children:Object(o.jsxs)("form",{onSubmit:Q,children:[T&&Object(o.jsx)("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:T}),Object(o.jsxs)(i.Label,{children:[Object(o.jsx)("span",{children:"Size Name *"}),Object(o.jsx)(i.Input,{className:"mt-1",name:"name",value:k.name,onChange:e=>{const{name:t,value:a}=e.target;C(e=>Object(s.a)(Object(s.a)({},e),{},{[t]:a})),w[t]&&A(e=>Object(s.a)(Object(s.a)({},e),{},{[t]:""})),T&&B("")},required:!0,valid:!w.name,maxLength:50}),w.name&&Object(o.jsx)(i.HelperText,{valid:!1,children:w.name})]})]})}),Object(o.jsxs)(i.ModalFooter,{className:"flex-shrink-0",children:[Object(o.jsx)("div",{className:"hidden sm:block",children:Object(o.jsx)(i.Button,{layout:"outline",onClick:K,disabled:z,children:"Cancel"})}),Object(o.jsx)("div",{className:"hidden sm:block",children:Object(o.jsx)(i.Button,{onClick:Q,style:{backgroundColor:"#AA1A21"},className:"text-white",disabled:z,children:z?"Creating...":"Create Size"})}),Object(o.jsx)("div",{className:"block w-full sm:hidden",children:Object(o.jsx)(i.Button,{block:!0,size:"large",layout:"outline",onClick:K,disabled:z,children:"Cancel"})}),Object(o.jsx)("div",{className:"block w-full sm:hidden",children:Object(o.jsx)(i.Button,{block:!0,size:"large",onClick:Q,style:{backgroundColor:"#AA1A21"},className:"text-white",disabled:z,children:z?"Creating...":"Create Size"})})]})]}),Object(o.jsxs)(i.Modal,{isOpen:F,onClose:W,children:[Object(o.jsx)(i.ModalHeader,{children:"Edit Size"}),Object(o.jsx)(i.ModalBody,{className:"max-h-[60vh] sm:max-h-[70vh] overflow-y-auto",children:Object(o.jsxs)("form",{onSubmit:X,children:[U&&Object(o.jsx)("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:U}),Object(o.jsxs)(i.Label,{children:[Object(o.jsx)("span",{children:"Size Name *"}),Object(o.jsx)(i.Input,{className:"mt-1",name:"name",value:L.name,onChange:e=>{const{name:t,value:a}=e.target;M(e=>Object(s.a)(Object(s.a)({},e),{},{[t]:a})),I[t]&&R(e=>Object(s.a)(Object(s.a)({},e),{},{[t]:""})),U&&_("")},placeholder:"Enter size name",required:!0,valid:!I.name,maxLength:50}),I.name&&Object(o.jsx)(i.HelperText,{valid:!1,children:I.name})]})]})}),Object(o.jsxs)(i.ModalFooter,{className:"flex-shrink-0",children:[Object(o.jsx)("div",{className:"hidden sm:block",children:Object(o.jsx)(i.Button,{layout:"outline",onClick:W,disabled:q,children:"Cancel"})}),Object(o.jsx)("div",{className:"hidden sm:block",children:Object(o.jsx)(i.Button,{onClick:X,style:{backgroundColor:"#AA1A21"},className:"text-white",disabled:q,children:q?"Updating...":"Update Size"})}),Object(o.jsx)("div",{className:"block w-full sm:hidden",children:Object(o.jsx)(i.Button,{block:!0,size:"large",layout:"outline",onClick:W,disabled:q,children:"Cancel"})}),Object(o.jsx)("div",{className:"block w-full sm:hidden",children:Object(o.jsx)(i.Button,{block:!0,size:"large",onClick:X,style:{backgroundColor:"#AA1A21"},className:"text-white",disabled:q,children:q?"Updating...":"Update Size"})})]})]})]})}},51:function(e,t,a){"use strict";a(1);var s=a(3);t.a=function(e){let{children:t}=e;return Object(s.jsx)("h1",{className:"my-6 text-2xl font-semibold text-gray-700 dark:text-gray-200",children:t})}}}]);
//# sourceMappingURL=28.b4506b89.chunk.js.map