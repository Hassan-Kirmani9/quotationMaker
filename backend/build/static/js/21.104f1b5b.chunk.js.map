{"version":3,"sources":["pages/Configurations/Configurations.js","components/Typography/PageTitle.js"],"names":["Configuration","history","useHistory","config","setConfig","useState","form","setForm","bankName","accountName","accountNumber","routingNumber","businessName","address","mobileNum","businessNum","email","web","logo","taxId","validity","terms","notes","prefix","currency","loading","setLoading","saving","setSaving","error","setError","logoFile","setLogoFile","logoPreview","setLogoPreview","useEffect","async","res","get","success","_c$bank","_c$bank2","_c$bank3","_c$bank4","_c$business","_c$business2","_c$business3","_c$business4","_c$business5","_c$business6","_c$business7","_c$quotation","_c$quotation2","_c$quotation3","_c$quotation4","_c$quotation5","_c$business8","_c$business9","c","data","configuration","bank","name","business","quotation","concat","err","console","fetchConfig","handleChange","e","value","target","prev","_objectSpread","_jsx","PageTitle","children","_jsxs","_Fragment","className","Button","onClick","push","Label","Input","onChange","type","id","accept","file","files","size","reader","FileReader","onload","event","result","readAsDataURL","HelperText","Select","required","src","logoPath","startsWith","alt","onError","style","display","removeLogo","document","getElementById","min","max","rows","placeholder","valid","logoUrl","formData","FormData","append","uploadData","uploadFile","Error","message","uploadErr","payload","Number","put","alert","window","dispatchEvent","CustomEvent","detail","_err$response","_err$response$data","response","backgroundColor","disabled","_ref"],"mappings":"0LAqXeA,UA7Wf,WACE,MAAMC,EAAUC,eACTC,EAAQC,GAAaC,mBAAS,OAC9BC,EAAMC,GAAWF,mBAAS,CAC/BG,SAAU,GACVC,YAAa,GACbC,cAAe,GACfC,cAAe,GACfC,aAAc,GACdC,QAAS,GACTC,UAAW,GACXC,YAAa,GACbC,MAAO,GACPC,IAAK,GACLC,KAAM,GACNC,MAAO,GACPC,SAAU,GACVC,MAAO,GACPC,MAAO,GACPC,OAAQ,MACRC,SAAU,SAELC,EAASC,GAAcrB,oBAAS,IAChCsB,EAAQC,GAAavB,oBAAS,IAC9BwB,EAAOC,GAAYzB,mBAAS,KAC5B0B,EAAUC,GAAe3B,mBAAS,OAClC4B,EAAaC,GAAkB7B,mBAAS,IAmB/C8B,oBAAU,MACRC,iBACEV,GAAW,GACX,IACE,MAAMW,QAAYC,YAAI,kBACtB,GAAID,EAAIE,QAAS,CAAC,IAADC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EACf,MAAMC,EAAIrB,EAAIsB,KAAKC,cACnBxD,EAAUsD,GACVnD,EAAQ,CACNC,UAAgB,QAANgC,EAAAkB,EAAEG,YAAI,IAAArB,OAAA,EAANA,EAAQsB,OAAQ,GAC1BrD,aAAmB,QAANgC,EAAAiB,EAAEG,YAAI,IAAApB,OAAA,EAANA,EAAQhC,cAAe,GACpCC,eAAqB,QAANgC,EAAAgB,EAAEG,YAAI,IAAAnB,OAAA,EAANA,EAAQhC,gBAAiB,GACxCC,eAAqB,QAANgC,EAAAe,EAAEG,YAAI,IAAAlB,OAAA,EAANA,EAAQhC,gBAAiB,GACxCC,cAAwB,QAAVgC,EAAAc,EAAEK,gBAAQ,IAAAnB,OAAA,EAAVA,EAAYkB,OAAQ,GAClCjD,SAAmB,QAAVgC,EAAAa,EAAEK,gBAAQ,IAAAlB,OAAA,EAAVA,EAAYhC,UAAW,GAChCC,WAAqB,QAAVgC,EAAAY,EAAEK,gBAAQ,IAAAjB,OAAA,EAAVA,EAAYhC,YAAa,GACpCC,aAAuB,QAAVgC,EAAAW,EAAEK,gBAAQ,IAAAhB,OAAA,EAAVA,EAAYhC,cAAe,GACxCC,OAAiB,QAAVgC,EAAAU,EAAEK,gBAAQ,IAAAf,OAAA,EAAVA,EAAYhC,QAAS,GAC5BC,KAAe,QAAVgC,EAAAS,EAAEK,gBAAQ,IAAAd,OAAA,EAAVA,EAAYhC,MAAO,GACxBE,OAAiB,QAAV+B,EAAAQ,EAAEK,gBAAQ,IAAAb,OAAA,EAAVA,EAAY/B,QAAS,GAC5BC,UAAqB,QAAX+B,EAAAO,EAAEM,iBAAS,IAAAb,OAAA,EAAXA,EAAa/B,WAAY,GACnCC,OAAkB,QAAX+B,EAAAM,EAAEM,iBAAS,IAAAZ,OAAA,EAAXA,EAAa/B,QAAS,GAC7BC,OAAkB,QAAX+B,EAAAK,EAAEM,iBAAS,IAAAX,OAAA,EAAXA,EAAa/B,QAAS,GAC7BC,QAAmB,QAAX+B,EAAAI,EAAEM,iBAAS,IAAAV,OAAA,EAAXA,EAAa/B,SAAU,MAC/BC,UAAqB,QAAX+B,EAAAG,EAAEM,iBAAS,IAAAT,OAAA,EAAXA,EAAa/B,YAAsB,QAAdgC,EAAIE,EAAEK,gBAAQ,IAAAP,OAAA,EAAVA,EAAYhC,YAEjDU,EAAyB,QAAVuB,EAAAC,EAAEK,gBAAQ,IAAAN,GAAVA,EAAYvC,KAAI,wBAAA+C,OAA2BP,EAAEK,SAAS7C,MAAS,GAChF,CACF,CAAE,MAAOgD,GACPC,QAAQtC,MAAMqC,GACdpC,EAAS,+BACX,CAAC,QACCJ,GAAW,EACb,CACF,CAEA0C,IACC,IAEH,MAAMC,EAAeC,IACnB,MAAM,KAAER,EAAI,MAAES,GAAUD,EAAEE,OAC1BjE,EAAQkE,GAAIC,wBAAA,GAAUD,GAAI,IAAE,CAACX,GAAOS,KAChC1C,GAAOC,EAAS,KA8FtB,OAAIL,EAAgBkD,cAACC,IAAS,CAAAC,SAAC,eAG7BC,eAAAC,WAAA,CAAAF,SAAA,CACEC,eAAA,OAAKE,UAAU,yCAAwCH,SAAA,CACrDF,cAACC,IAAS,CAAAC,SAAC,kBACXF,cAACM,SAAM,CAACC,QAASA,IAAMjF,EAAQkF,KAAK,mBAAmBN,SAAC,kBAK1DC,eAAA,OAAKE,UAAU,qDAAoDH,SAAA,CAEjEF,cAAA,MAAIK,UAAU,8DAA6DH,SAAC,qBAC5EC,eAAA,OAAKE,UAAU,6CAA4CH,SAAA,CACzDC,eAACM,QAAK,CAAAP,SAAA,CACJF,cAAA,QAAAE,SAAM,cACNF,cAACU,QAAK,CAACvB,KAAK,WAAWS,MAAOjE,EAAKE,SAAU8E,SAAUjB,OAEzDS,eAACM,QAAK,CAAAP,SAAA,CACJF,cAAA,QAAAE,SAAM,iBACNF,cAACU,QAAK,CAACvB,KAAK,cAAcS,MAAOjE,EAAKG,YAAa6E,SAAUjB,OAE/DS,eAACM,QAAK,CAAAP,SAAA,CACJF,cAAA,QAAAE,SAAM,mBACNF,cAACU,QAAK,CAACvB,KAAK,gBAAgBS,MAAOjE,EAAKI,cAAe4E,SAAUjB,OAEnES,eAACM,QAAK,CAAAP,SAAA,CACJF,cAAA,QAAAE,SAAM,mBACNF,cAACU,QAAK,CAACvB,KAAK,gBAAgBS,MAAOjE,EAAKK,cAAe2E,SAAUjB,UAKrEM,cAAA,MAAIK,UAAU,8DAA6DH,SAAC,yBAC5EC,eAAA,OAAKE,UAAU,6CAA4CH,SAAA,CACzDC,eAACM,QAAK,CAAAP,SAAA,CACJF,cAAA,QAAAE,SAAM,kBACNF,cAACU,QAAK,CAACvB,KAAK,eAAeS,MAAOjE,EAAKM,aAAc0E,SAAUjB,OAEjES,eAACM,QAAK,CAAAP,SAAA,CACJF,cAAA,QAAAE,SAAM,qBACNF,cAACU,QAAK,CAACvB,KAAK,UAAUS,MAAOjE,EAAKO,QAASyE,SAAUjB,OAEvDS,eAACM,QAAK,CAAAP,SAAA,CACJF,cAAA,QAAAE,SAAM,kBACNF,cAACU,QAAK,CAACvB,KAAK,YAAYS,MAAOjE,EAAKQ,UAAWwE,SAAUjB,OAE3DS,eAACM,QAAK,CAAAP,SAAA,CACJF,cAAA,QAAAE,SAAM,oBACNF,cAACU,QAAK,CAACvB,KAAK,cAAcS,MAAOjE,EAAKS,YAAauE,SAAUjB,OAE/DS,eAACM,QAAK,CAAAP,SAAA,CACJF,cAAA,QAAAE,SAAM,UACNF,cAACU,QAAK,CAACvB,KAAK,QAAQS,MAAOjE,EAAKU,MAAOsE,SAAUjB,EAAckB,KAAK,aAEtET,eAACM,QAAK,CAAAP,SAAA,CACJF,cAAA,QAAAE,SAAM,gBACNF,cAACU,QAAK,CAACvB,KAAK,MAAMS,MAAOjE,EAAKW,IAAKqE,SAAUjB,OAE/CS,eAACM,QAAK,CAAAP,SAAA,CACJF,cAAA,QAAAE,SAAM,kBACNF,cAAA,SACEa,GAAG,cACHD,KAAK,OACLE,OAAO,UACPH,SA7JahB,IACvB,MAAMoB,EAAOpB,EAAEE,OAAOmB,MAAM,GAC5B,GAAID,EAAM,CACR,GAAIA,EAAKE,KAAO,QAEd,YADA9D,EAAS,0CAIXE,EAAY0D,GACZ,MAAMG,EAAS,IAAIC,WACnBD,EAAOE,OAAUC,IACf9D,EAAe8D,EAAMxB,OAAOyB,SAE9BJ,EAAOK,cAAcR,GACjB7D,GAAOC,EAAS,GACtB,GA+IUkD,UAAU,wPAEZL,cAACwB,aAAU,CAAAtB,SAAC,sCAEdC,eAACM,QAAK,CAAAP,SAAA,CACJF,cAAA,QAAAE,SAAM,WACNF,cAACU,QAAK,CAACvB,KAAK,QAAQS,MAAOjE,EAAKa,MAAOmE,SAAUjB,OAEnDS,eAACM,QAAK,CAAAP,SAAA,CACJF,cAAA,QAAAE,SAAM,uBACNC,eAACsB,SAAM,CACLpB,UAAU,OACVlB,KAAK,WACLS,MAAOjE,EAAKkB,SACZ8D,SAAUjB,EACVgC,UAAQ,EAAAxB,SAAA,CAERF,cAAA,UAAQJ,MAAM,MAAKM,SAAC,oBACpBF,cAAA,UAAQJ,MAAM,MAAKM,SAAC,eACpBF,cAAA,UAAQJ,MAAM,MAAKM,SAAC,wBACpBF,cAAA,UAAQJ,MAAM,MAAKM,SAAC,qBACpBF,cAAA,UAAQJ,MAAM,MAAKM,SAAC,0BACpBF,cAAA,UAAQJ,MAAM,MAAKM,SAAC,0BACpBF,cAAA,UAAQJ,MAAM,MAAKM,SAAC,4BACpBF,cAAA,UAAQJ,MAAM,MAAKM,SAAC,uBACpBF,cAAA,UAAQJ,MAAM,MAAKM,SAAC,uBACpBF,cAAA,UAAQJ,MAAM,MAAKM,SAAC,yBAEtBF,cAACwB,aAAU,CAAAtB,SAAC,+CAEb5C,GACC0C,cAAA,OAAKK,UAAU,gBAAeH,SAC5BC,eAAA,OAAKE,UAAU,0BAAyBH,SAAA,CACtCF,cAAA,OACE2B,KA/PKC,EA+PYtE,EA9P1BsE,EACDA,EAASC,WAAW,QAAgBD,EAClC,wBAANtC,OAA+BsC,GAFT,IA+PRE,IAAI,eACJzB,UAAU,0CACV0B,QAAUpC,IACRH,QAAQtC,MAAM,wBAAyByC,EAAEE,OAAO8B,KAChDhC,EAAEE,OAAOmC,MAAMC,QAAU,UAG7BjC,cAACM,SAAM,CACLM,KAAK,SACLL,QAxLG2B,KACjB7E,EAAY,MACZE,EAAe,IACf4E,SAASC,eAAe,eAAexC,MAAQ,IAsLjCS,UAAU,mEAAkEH,SAC7E,wBASTF,cAAA,MAAIK,UAAU,8DAA6DH,SAAC,uBAC5EC,eAAA,OAAKE,UAAU,wCAAuCH,SAAA,CACpDC,eAACM,QAAK,CAAAP,SAAA,CACJF,cAAA,QAAAE,SAAM,8BACNF,cAACU,QAAK,CACJvB,KAAK,WACLS,MAAOjE,EAAKc,SACZkE,SAAUjB,EACVkB,KAAK,SACLyB,IAAI,IACJC,IAAI,QAENtC,cAACwB,aAAU,CAAAtB,SAAC,6CAEdC,eAACM,QAAK,CAAAP,SAAA,CACJF,cAAA,QAAAE,SAAM,qBACNF,cAACU,QAAK,CAACvB,KAAK,SAASS,MAAOjE,EAAKiB,OAAQ+D,SAAUjB,IACnDM,cAACwB,aAAU,CAAAtB,SAAC,4DAEdC,eAACM,QAAK,CAACJ,UAAU,gBAAeH,SAAA,CAC9BF,cAAA,QAAAE,SAAM,uBACNF,cAAA,YACEb,KAAK,QACLS,MAAOjE,EAAKe,MACZiE,SAAUjB,EACVW,UAAU,8LACVkC,KAAK,IACLC,YAAY,4DAGhBrC,eAACM,QAAK,CAACJ,UAAU,gBAAeH,SAAA,CAC9BF,cAAA,QAAAE,SAAM,kBACNF,cAAA,YACEb,KAAK,QACLS,MAAOjE,EAAKgB,MACZgE,SAAUjB,EACVW,UAAU,8LACVkC,KAAK,IACLC,YAAY,gDAKjBtF,GACC8C,cAACwB,aAAU,CAACiB,OAAO,EAAOpC,UAAU,OAAMH,SAAEhD,IAG9C8C,cAAA,OAAKK,UAAU,OAAMH,SACnBF,cAACM,SAAM,CACLC,QA/OW9C,UACnBR,GAAU,GACVE,EAAS,IACT,IACE,IAAIuF,EAAUpF,EAGd,GAAIF,EAAU,CACZ,MAAMuF,EAAW,IAAIC,SACrBD,EAASE,OAAO,OAAQzF,GAExB,IACE,MAAM0F,QAAmBC,YAAW,6BAA8BJ,GAElE,IAAIG,EAAWlF,QAGb,MAAM,IAAIoF,MAAMF,EAAWG,SAAW,sBAFtCP,EAAUI,EAAWJ,OAIzB,CAAE,MAAOQ,GAGP,OAFA/F,EAAS,0BAA4B+F,EAAUD,cAC/ChG,GAAU,EAEZ,CACF,CAAE,MAAMkG,EAAU,CAChBjE,KAAM,CACJC,KAAMxD,EAAKE,SACXC,YAAaH,EAAKG,YAClBC,cAAeJ,EAAKI,cACpBC,cAAeL,EAAKK,eAEtBoD,SAAU,CACRD,KAAMxD,EAAKM,aACXC,QAASP,EAAKO,QACdC,UAAWR,EAAKQ,UAChBC,YAAaT,EAAKS,YAClBC,MAAOV,EAAKU,MACZC,IAAKX,EAAKW,IACVC,KAAMmG,EACNlG,MAAOb,EAAKa,MACZK,SAAUlB,EAAKkB,UAEjBwC,UAAW,CACT5C,SAAU2G,OAAOzH,EAAKc,UACtBC,MAAOf,EAAKe,MACZC,MAAOhB,EAAKgB,MACZC,OAAQjB,EAAKiB,OACbC,SAAUlB,EAAKkB,WAIba,QAAY2F,YAAI,iBAAkBF,GACpCzF,EAAIE,SACNnC,EAAUiC,EAAIsB,KAAKC,eACnBqE,MAAM,oCACNC,OAAOC,cAAc,IAAIC,YAAY,kBAAmB,CAAEC,OAAQ,CAAE7G,SAAUlB,EAAKkB,cAGnFM,EAASO,EAAIuF,SAAW,cAE5B,CAAE,MAAO1D,GAAM,IAADoE,EAAAC,EACZzG,GAAqB,QAAZwG,EAAApE,EAAIsE,gBAAQ,IAAAF,GAAM,QAANC,EAAZD,EAAc3E,YAAI,IAAA4E,OAAN,EAAZA,EAAoBX,UAAW1D,EAAI0D,SAAW,eACvDzD,QAAQtC,MAAMqC,EAChB,CAAC,QACCtC,GAAU,EACZ,GA+KQ+E,MAAO,CAAE8B,gBAAiB,WAC1BzD,UAAU,aACV0D,SAAU/G,EAAOkD,SAEhBlD,EAAS,YAAexB,EAAS,uBAAyB,+BA1UhDoG,KAgVvB,C,kCCnXA,gBAQe3B,IANf,SAAkB+D,GAAgB,IAAf,SAAE9D,GAAU8D,EAC7B,OACEhE,cAAA,MAAIK,UAAU,+DAA8DH,SAAEA,GAElF,C","file":"static/js/21.104f1b5b.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { get, put, uploadFile } from '../../api/axios';\r\nimport {\r\n  Button, Label, Input, HelperText, Select\r\n} from '@windmill/react-ui';\r\nimport PageTitle from '../../components/Typography/PageTitle';\r\n\r\nfunction Configuration() {\r\n  const history = useHistory();\r\n  const [config, setConfig] = useState(null);\r\n  const [form, setForm] = useState({\r\n    bankName: '',\r\n    accountName: '',\r\n    accountNumber: '',\r\n    routingNumber: '',\r\n    businessName: '',\r\n    address: '',\r\n    mobileNum: '',\r\n    businessNum: '',\r\n    email: '',\r\n    web: '',\r\n    logo: '',\r\n    taxId: '',\r\n    validity: 30,\r\n    terms: '',\r\n    notes: '',\r\n    prefix: 'QUO',\r\n    currency: 'USD'\r\n  });\r\n  const [loading, setLoading] = useState(true);\r\n  const [saving, setSaving] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [logoFile, setLogoFile] = useState(null);\r\n  const [logoPreview, setLogoPreview] = useState('');\r\n  const getImageUrl = (logoPath) => {\r\n    if (!logoPath) return '';\r\n    if (logoPath.startsWith('http')) return logoPath; // Already full URL\r\n    return `http://localhost:5000${logoPath}`; // Add backend URL\r\n  };\r\n  const currencies = [\r\n    { code: 'USD', symbol: '$', name: 'US Dollar' },\r\n    { code: 'EUR', symbol: '€', name: 'Euro' },\r\n    { code: 'GBP', symbol: '£', name: 'British Pound' },\r\n    { code: 'PKR', symbol: '₨', name: 'Pakistani Rupee' },\r\n    { code: 'AED', symbol: 'د.إ', name: 'UAE Dirham' },\r\n    { code: 'CAD', symbol: 'C$', name: 'Canadian Dollar' },\r\n    { code: 'AUD', symbol: 'A$', name: 'Australian Dollar' },\r\n    { code: 'JPY', symbol: '¥', name: 'Japanese Yen' },\r\n    { code: 'INR', symbol: '₹', name: 'Indian Rupee' },\r\n    { code: 'CHF', symbol: 'Fr', name: 'Swiss Franc' }\r\n  ];\r\n\r\n  useEffect(() => {\r\n    async function fetchConfig() {\r\n      setLoading(true);\r\n      try {\r\n        const res = await get('/configuration');\r\n        if (res.success) {\r\n          const c = res.data.configuration;\r\n          setConfig(c);\r\n          setForm({\r\n            bankName: c.bank?.name || '',\r\n            accountName: c.bank?.accountName || '',\r\n            accountNumber: c.bank?.accountNumber || '',\r\n            routingNumber: c.bank?.routingNumber || '',\r\n            businessName: c.business?.name || '',\r\n            address: c.business?.address || '',\r\n            mobileNum: c.business?.mobileNum || '',\r\n            businessNum: c.business?.businessNum || '',\r\n            email: c.business?.email || '',\r\n            web: c.business?.web || '',\r\n            taxId: c.business?.taxId || '',\r\n            validity: c.quotation?.validity || 30,\r\n            terms: c.quotation?.terms || '',\r\n            notes: c.quotation?.notes || '',\r\n            prefix: c.quotation?.prefix || 'QUO',\r\n            currency: c.quotation?.currency || c.business?.currency\r\n          });\r\n          setLogoPreview(c.business?.logo ? `http://localhost:5000${c.business.logo}` : '');\r\n        }\r\n      } catch (err) {\r\n        console.error(err);\r\n        setError('Failed to load configuration');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n\r\n    fetchConfig();\r\n  }, []);\r\n\r\n  const handleChange = e => {\r\n    const { name, value } = e.target;\r\n    setForm(prev => ({ ...prev, [name]: value }));\r\n    if (error) setError('');\r\n  };\r\n\r\n  const handleLogoUpload = e => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      if (file.size > 5 * 1024 * 1024) { // 5MB limit\r\n        setError('Logo file size should be less than 5MB');\r\n        return;\r\n      }\r\n\r\n      setLogoFile(file);\r\n      const reader = new FileReader();\r\n      reader.onload = (event) => {\r\n        setLogoPreview(event.target.result);\r\n      };\r\n      reader.readAsDataURL(file);\r\n      if (error) setError('');\r\n    }\r\n  };\r\n\r\n  const removeLogo = () => {\r\n    setLogoFile(null);\r\n    setLogoPreview('');\r\n    document.getElementById('logo-upload').value = '';\r\n  };\r\n  const handleSubmit = async () => {\r\n    setSaving(true);\r\n    setError('');\r\n    try {\r\n      let logoUrl = logoPreview;\r\n\r\n      // If there's a new logo file, upload it first\r\n      if (logoFile) {\r\n        const formData = new FormData();\r\n        formData.append('logo', logoFile);\r\n\r\n        try {\r\n          const uploadData = await uploadFile('/configuration/upload-logo', formData);\r\n\r\n          if (uploadData.success) {\r\n            logoUrl = uploadData.logoUrl;\r\n          } else {\r\n            throw new Error(uploadData.message || 'Logo upload failed');\r\n          }\r\n        } catch (uploadErr) {\r\n          setError('Failed to upload logo: ' + uploadErr.message);\r\n          setSaving(false);\r\n          return;\r\n        }\r\n      } const payload = {\r\n        bank: {\r\n          name: form.bankName,\r\n          accountName: form.accountName,\r\n          accountNumber: form.accountNumber,\r\n          routingNumber: form.routingNumber\r\n        },\r\n        business: {\r\n          name: form.businessName,\r\n          address: form.address,\r\n          mobileNum: form.mobileNum,\r\n          businessNum: form.businessNum,\r\n          email: form.email,\r\n          web: form.web,\r\n          logo: logoUrl,\r\n          taxId: form.taxId,\r\n          currency: form.currency\r\n        },\r\n        quotation: {\r\n          validity: Number(form.validity),\r\n          terms: form.terms,\r\n          notes: form.notes,\r\n          prefix: form.prefix,\r\n          currency: form.currency\r\n        }\r\n      };\r\n\r\n      const res = await put('/configuration', payload);\r\n      if (res.success) {\r\n        setConfig(res.data.configuration);\r\n        alert('Configuration saved successfully');\r\n        window.dispatchEvent(new CustomEvent('currencyUpdated', { detail: { currency: form.currency } }));\r\n\r\n      } else {\r\n        setError(res.message || 'Save failed');\r\n      }\r\n    } catch (err) {\r\n      setError(err.response?.data?.message || err.message || 'Save failed');\r\n      console.error(err);\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  if (loading) return <PageTitle>Loading...</PageTitle>;\r\n\r\n  return (\r\n    <>\r\n      <div className=\"flex justify-between items-center mb-6\">\r\n        <PageTitle>Configuration</PageTitle>\r\n        <Button onClick={() => history.push('/app/quotations')}>\r\n          Quotations\r\n        </Button>\r\n      </div>\r\n\r\n      <div className=\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg\">\r\n        {/* Bank Info Section */}\r\n        <h3 className=\"text-xl font-semibold mb-4 text-gray-800 dark:text-gray-200\">Bank Information</h3>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6\">\r\n          <Label>\r\n            <span>Bank Name</span>\r\n            <Input name=\"bankName\" value={form.bankName} onChange={handleChange} />\r\n          </Label>\r\n          <Label>\r\n            <span>Account Name</span>\r\n            <Input name=\"accountName\" value={form.accountName} onChange={handleChange} />\r\n          </Label>\r\n          <Label>\r\n            <span>Account Number</span>\r\n            <Input name=\"accountNumber\" value={form.accountNumber} onChange={handleChange} />\r\n          </Label>\r\n          <Label>\r\n            <span>Routing Number</span>\r\n            <Input name=\"routingNumber\" value={form.routingNumber} onChange={handleChange} />\r\n          </Label>\r\n        </div>\r\n\r\n        {/* Business Info Section */}\r\n        <h3 className=\"text-xl font-semibold mb-4 text-gray-800 dark:text-gray-200\">Business Information</h3>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6\">\r\n          <Label>\r\n            <span>Business Name</span>\r\n            <Input name=\"businessName\" value={form.businessName} onChange={handleChange} />\r\n          </Label>\r\n          <Label>\r\n            <span>Business Address</span>\r\n            <Input name=\"address\" value={form.address} onChange={handleChange} />\r\n          </Label>\r\n          <Label>\r\n            <span>Mobile Number</span>\r\n            <Input name=\"mobileNum\" value={form.mobileNum} onChange={handleChange} />\r\n          </Label>\r\n          <Label>\r\n            <span>Business Number</span>\r\n            <Input name=\"businessNum\" value={form.businessNum} onChange={handleChange} />\r\n          </Label>\r\n          <Label>\r\n            <span>Email</span>\r\n            <Input name=\"email\" value={form.email} onChange={handleChange} type=\"email\" />\r\n          </Label>\r\n          <Label>\r\n            <span>Website URL</span>\r\n            <Input name=\"web\" value={form.web} onChange={handleChange} />\r\n          </Label>\r\n          <Label>\r\n            <span>Business Logo</span>\r\n            <input\r\n              id=\"logo-upload\"\r\n              type=\"file\"\r\n              accept=\"image/*\"\r\n              onChange={handleLogoUpload}\r\n              className=\"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100 dark:file:bg-gray-700 dark:file:text-gray-300\"\r\n            />\r\n            <HelperText>Upload an image file (max 5MB)</HelperText>\r\n          </Label>\r\n          <Label>\r\n            <span>Tax ID</span>\r\n            <Input name=\"taxId\" value={form.taxId} onChange={handleChange} />\r\n          </Label>\r\n          <Label>\r\n            <span>Default Currency *</span>\r\n            <Select\r\n              className=\"mt-1\"\r\n              name=\"currency\"\r\n              value={form.currency}\r\n              onChange={handleChange}\r\n              required\r\n            >\r\n              <option value=\"USD\">USD - US Dollar</option>\r\n              <option value=\"EUR\">EUR - Euro</option>\r\n              <option value=\"GBP\">GBP - British Pound</option>\r\n              <option value=\"AED\">AED - UAE Dirham</option>\r\n              <option value=\"PKR\">PKR - Pakistani Rupee</option>\r\n              <option value=\"CAD\">CAD - Canadian Dollar</option>\r\n              <option value=\"AUD\">AUD - Australian Dollar</option>\r\n              <option value=\"JPY\">JPY - Japanese Yen</option>\r\n              <option value=\"INR\">INR - Indian Rupee</option>\r\n              <option value=\"SAR\">SAR - Saudi Riyal</option>\r\n            </Select>\r\n            <HelperText>Currency for all quotations and pricing</HelperText>\r\n          </Label>\r\n          {logoPreview && (\r\n            <div className=\"md:col-span-2\">\r\n              <div className=\"flex items-center gap-4\">\r\n                <img\r\n                  src={getImageUrl(logoPreview)}\r\n                  alt=\"Logo Preview\"\r\n                  className=\"h-20 mt-2 object-contain rounded border\"\r\n                  onError={(e) => {\r\n                    console.error('Image failed to load:', e.target.src);\r\n                    e.target.style.display = 'none';\r\n                  }}\r\n                />\r\n                <Button\r\n                  type=\"button\"\r\n                  onClick={removeLogo}\r\n                  className=\"bg-red-500 hover:bg-red-600 text-white text-sm px-3 py-1 rounded\"\r\n                >\r\n                  Remove Logo\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Quotation Settings Section */}\r\n        <h3 className=\"text-xl font-semibold mb-4 text-gray-800 dark:text-gray-200\">Quotation Settings</h3>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n          <Label>\r\n            <span>Quotation Validity (Days)</span>\r\n            <Input\r\n              name=\"validity\"\r\n              value={form.validity}\r\n              onChange={handleChange}\r\n              type=\"number\"\r\n              min=\"1\"\r\n              max=\"365\"\r\n            />\r\n            <HelperText>How many days quotations remain valid</HelperText>\r\n          </Label>\r\n          <Label>\r\n            <span>Quotation Prefix</span>\r\n            <Input name=\"prefix\" value={form.prefix} onChange={handleChange} />\r\n            <HelperText>Prefix for quotation numbers (e.g., QUO-202409-0001)</HelperText>\r\n          </Label>\r\n          <Label className=\"md:col-span-2\">\r\n            <span>Terms & Conditions</span>\r\n            <textarea\r\n              name=\"terms\"\r\n              value={form.terms}\r\n              onChange={handleChange}\r\n              className=\"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-purple-300 focus:ring focus:ring-purple-200 focus:ring-opacity-50 dark:border-gray-600 dark:bg-gray-700 dark:text-white\"\r\n              rows=\"4\"\r\n              placeholder=\"Enter default terms and conditions for quotations...\"\r\n            />\r\n          </Label>\r\n          <Label className=\"md:col-span-2\">\r\n            <span>Default Notes</span>\r\n            <textarea\r\n              name=\"notes\"\r\n              value={form.notes}\r\n              onChange={handleChange}\r\n              className=\"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-purple-300 focus:ring focus:ring-purple-200 focus:ring-opacity-50 dark:border-gray-600 dark:bg-gray-700 dark:text-white\"\r\n              rows=\"3\"\r\n              placeholder=\"Enter default notes for quotations...\"\r\n            />\r\n          </Label>\r\n        </div>\r\n\r\n        {error && (\r\n          <HelperText valid={false} className=\"mt-4\">{error}</HelperText>\r\n        )}\r\n\r\n        <div className=\"mt-6\">\r\n          <Button\r\n            onClick={handleSubmit}\r\n            style={{ backgroundColor: \"#AA1A21\" }}\r\n            className=\"text-white\"\r\n            disabled={saving}\r\n          >\r\n            {saving ? 'Saving...' : (config ? 'Update Configuration' : 'Save Configuration')}\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Configuration;","import React from 'react'\r\n\r\nfunction PageTitle({ children }) {\r\n  return (\r\n    <h1 className=\"my-6 text-2xl font-semibold text-gray-700 dark:text-gray-200\">{children}</h1>\r\n  )\r\n}\r\n\r\nexport default PageTitle\r\n"],"sourceRoot":""}