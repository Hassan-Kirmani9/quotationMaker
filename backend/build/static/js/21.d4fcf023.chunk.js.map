{"version":3,"sources":["pages/Configurations/Configurations.js","components/Typography/PageTitle.js"],"names":["Configuration","useHistory","config","setConfig","useState","form","setForm","bankName","accountName","accountNumber","businessName","businessNameColor","address","mobileNum","businessNum","email","web","logo","taxId","validity","terms","quotationPrefix","invoicePrefix","currency","loading","setLoading","saving","setSaving","error","setError","logoFile","setLogoFile","logoPreview","setLogoPreview","useEffect","async","res","get","success","_c$bank","_c$bank2","_c$bank3","_c$business","_c$business2","_c$business3","_c$business4","_c$business5","_c$business6","_c$business7","_c$business8","_c$quotation","_c$quotation2","_c$quotation3","_c$quotation4","_c$quotation5","_c$business9","_c$business0","c","data","configuration","bank","name","business","nameColor","quotation","err","console","fetchConfig","handleChange","e","value","target","prev","_objectSpread","_jsx","PageTitle","children","_jsxs","_Fragment","className","Label","Input","onChange","type","HelperText","id","accept","file","files","size","reader","FileReader","onload","event","result","readAsDataURL","Select","required","src","logoPath","startsWith","concat","alt","onError","style","display","Button","onClick","removeLogo","document","getElementById","min","max","rows","placeholder","valid","logoUrl","base64","Promise","resolve","reject","onerror","uploadData","put","logoBase64","Error","message","uploadErr","payload","Number","alert","window","dispatchEvent","CustomEvent","detail","_err$response","_err$response$data","response","backgroundColor","disabled","_ref"],"mappings":"0LAmXeA,UA3Wf,WACkBC,cAAhB,MACOC,EAAQC,GAAaC,mBAAS,OAC9BC,EAAMC,GAAWF,mBAAS,CAC/BG,SAAU,GACVC,YAAa,GACbC,cAAe,GACfC,aAAc,GACdC,kBAAmB,UACnBC,QAAS,GACTC,UAAW,GACXC,YAAa,GACbC,MAAO,GACPC,IAAK,GACLC,KAAM,GACNC,MAAO,GACPC,SAAU,GACVC,MAAO,GACPC,gBAAiB,MACjBC,cAAe,MAAOC,SAAU,SAE3BC,EAASC,GAAcrB,oBAAS,IAChCsB,EAAQC,GAAavB,oBAAS,IAC9BwB,EAAOC,GAAYzB,mBAAS,KAC5B0B,EAAUC,GAAe3B,mBAAS,OAClC4B,EAAaC,GAAkB7B,mBAAS,IAoB/C8B,oBAAU,MACRC,iBACEV,GAAW,GACX,IACE,MAAMW,QAAYC,YAAI,kBACtB,GAAID,EAAIE,QAAS,CAAC,IAADC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EACf,MAAMC,EAAIrB,EAAIsB,KAAKC,cACnBxD,EAAUsD,GACVnD,EAAQ,CACNC,UAAgB,QAANgC,EAAAkB,EAAEG,YAAI,IAAArB,OAAA,EAANA,EAAQsB,OAAQ,GAC1BrD,aAAmB,QAANgC,EAAAiB,EAAEG,YAAI,IAAApB,OAAA,EAANA,EAAQhC,cAAe,GACpCC,eAAqB,QAANgC,EAAAgB,EAAEG,YAAI,IAAAnB,OAAA,EAANA,EAAQhC,gBAAiB,GACxCC,cAAwB,QAAVgC,EAAAe,EAAEK,gBAAQ,IAAApB,OAAA,EAAVA,EAAYmB,OAAQ,GAClClD,mBAA6B,QAAVgC,EAAAc,EAAEK,gBAAQ,IAAAnB,OAAA,EAAVA,EAAYoB,YAAa,UAAWnD,SAAmB,QAAVgC,EAAAa,EAAEK,gBAAQ,IAAAlB,OAAA,EAAVA,EAAYhC,UAAW,GACvFC,WAAqB,QAAVgC,EAAAY,EAAEK,gBAAQ,IAAAjB,OAAA,EAAVA,EAAYhC,YAAa,GACpCC,aAAuB,QAAVgC,EAAAW,EAAEK,gBAAQ,IAAAhB,OAAA,EAAVA,EAAYhC,cAAe,GACxCC,OAAiB,QAAVgC,EAAAU,EAAEK,gBAAQ,IAAAf,OAAA,EAAVA,EAAYhC,QAAS,GAC5BC,KAAe,QAAVgC,EAAAS,EAAEK,gBAAQ,IAAAd,OAAA,EAAVA,EAAYhC,MAAO,GACxBE,OAAiB,QAAV+B,EAAAQ,EAAEK,gBAAQ,IAAAb,OAAA,EAAVA,EAAY/B,QAAS,GAC5BC,UAAqB,QAAX+B,EAAAO,EAAEO,iBAAS,IAAAd,OAAA,EAAXA,EAAa/B,WAAY,GACnCC,OAAkB,QAAX+B,EAAAM,EAAEO,iBAAS,IAAAb,OAAA,EAAXA,EAAa/B,QAAS,GAC7BC,iBAA4B,QAAX+B,EAAAK,EAAEO,iBAAS,IAAAZ,OAAA,EAAXA,EAAa/B,kBAAmB,MACjDC,eAA0B,QAAX+B,EAAAI,EAAEO,iBAAS,IAAAX,OAAA,EAAXA,EAAa/B,gBAAiB,MAAOC,UAAqB,QAAX+B,EAAAG,EAAEO,iBAAS,IAAAV,OAAA,EAAXA,EAAa/B,YAAsB,QAAdgC,EAAIE,EAAEK,gBAAQ,IAAAP,OAAA,EAAVA,EAAYhC,YAErGU,GAAyB,QAAVuB,EAAAC,EAAEK,gBAAQ,IAAAN,OAAA,EAAVA,EAAYvC,OAAQ,GACrC,CACF,CAAE,MAAOgD,GACPC,QAAQtC,MAAMqC,GACdpC,EAAS,+BACX,CAAC,QACCJ,GAAW,EACb,CACF,CAEA0C,IACC,IAEH,MAAMC,EAAeC,IACnB,MAAM,KAAER,EAAI,MAAES,GAAUD,EAAEE,OAC1BjE,EAAQkE,GAAIC,wBAAA,GAAUD,GAAI,IAAE,CAACX,GAAOS,KAChC1C,GAAOC,EAAS,KA+FtB,OAAIL,EAAgBkD,cAACC,IAAS,CAAAC,SAAC,eAG7BC,eAAAC,WAAA,CAAAF,SAAA,CACEF,cAAA,OAAKK,UAAU,yCAAwCH,SACrDF,cAACC,IAAS,CAAAC,SAAC,oBAGbC,eAAA,OAAKE,UAAU,qDAAoDH,SAAA,CAEjEF,cAAA,MAAIK,UAAU,8DAA6DH,SAAC,qBAC5EC,eAAA,OAAKE,UAAU,6CAA4CH,SAAA,CACzDC,eAACG,QAAK,CAAAJ,SAAA,CACJF,cAAA,QAAAE,SAAM,cACNF,cAACO,QAAK,CAACpB,KAAK,WAAWS,MAAOjE,EAAKE,SAAU2E,SAAUd,OAEzDS,eAACG,QAAK,CAAAJ,SAAA,CACJF,cAAA,QAAAE,SAAM,iBACNF,cAACO,QAAK,CAACpB,KAAK,cAAcS,MAAOjE,EAAKG,YAAa0E,SAAUd,OAE/DS,eAACG,QAAK,CAAAJ,SAAA,CACJF,cAAA,QAAAE,SAAM,mBACNF,cAACO,QAAK,CAACpB,KAAK,gBAAgBS,MAAOjE,EAAKI,cAAeyE,SAAUd,UAMrEM,cAAA,MAAIK,UAAU,8DAA6DH,SAAC,yBAC5EC,eAAA,OAAKE,UAAU,6CAA4CH,SAAA,CACzDC,eAACG,QAAK,CAAAJ,SAAA,CACJF,cAAA,QAAAE,SAAM,kBACNF,cAACO,QAAK,CAACpB,KAAK,eAAeS,MAAOjE,EAAKK,aAAcwE,SAAUd,OAEjES,eAACG,QAAK,CAAAJ,SAAA,CACJF,cAAA,QAAAE,SAAM,wBACNF,cAAA,SACES,KAAK,QACLtB,KAAK,oBACLS,MAAOjE,EAAKM,kBACZuE,SAAUd,EACVW,UAAU,4EAEZL,cAACU,aAAU,CAAAR,SAAC,mDAEdC,eAACG,QAAK,CAAAJ,SAAA,CACJF,cAAA,QAAAE,SAAM,qBACNF,cAACO,QAAK,CAACpB,KAAK,UAAUS,MAAOjE,EAAKO,QAASsE,SAAUd,OAEvDS,eAACG,QAAK,CAAAJ,SAAA,CACJF,cAAA,QAAAE,SAAM,kBACNF,cAACO,QAAK,CAACpB,KAAK,YAAYS,MAAOjE,EAAKQ,UAAWqE,SAAUd,OAE3DS,eAACG,QAAK,CAAAJ,SAAA,CACJF,cAAA,QAAAE,SAAM,oBACNF,cAACO,QAAK,CAACpB,KAAK,cAAcS,MAAOjE,EAAKS,YAAaoE,SAAUd,OAE/DS,eAACG,QAAK,CAAAJ,SAAA,CACJF,cAAA,QAAAE,SAAM,UACNF,cAACO,QAAK,CAACpB,KAAK,QAAQS,MAAOjE,EAAKU,MAAOmE,SAAUd,EAAce,KAAK,aAEtEN,eAACG,QAAK,CAAAJ,SAAA,CACJF,cAAA,QAAAE,SAAM,gBACNF,cAACO,QAAK,CAACpB,KAAK,MAAMS,MAAOjE,EAAKW,IAAKkE,SAAUd,OAE/CS,eAACG,QAAK,CAAAJ,SAAA,CACJF,cAAA,QAAAE,SAAM,kBACNF,cAAA,SACEW,GAAG,cACHF,KAAK,OACLG,OAAO,UACPJ,SAnKab,IACvB,MAAMkB,EAAOlB,EAAEE,OAAOiB,MAAM,GAC5B,GAAID,EAAM,CACR,GAAIA,EAAKE,KAAO,QAEd,YADA5D,EAAS,0CAIXE,EAAYwD,GACZ,MAAMG,EAAS,IAAIC,WACnBD,EAAOE,OAAUC,IACf5D,EAAe4D,EAAMtB,OAAOuB,SAE9BJ,EAAOK,cAAcR,GACjB3D,GAAOC,EAAS,GACtB,GAqJUkD,UAAU,wPAEZL,cAACU,aAAU,CAAAR,SAAC,sCAEdC,eAACG,QAAK,CAAAJ,SAAA,CACJF,cAAA,QAAAE,SAAM,WACNF,cAACO,QAAK,CAACpB,KAAK,QAAQS,MAAOjE,EAAKa,MAAOgE,SAAUd,OAEnDS,eAACG,QAAK,CAAAJ,SAAA,CACJF,cAAA,QAAAE,SAAM,uBACNC,eAACmB,SAAM,CACLjB,UAAU,OACVlB,KAAK,WACLS,MAAOjE,EAAKkB,SACZ2D,SAAUd,EACV6B,UAAQ,EAAArB,SAAA,CAERF,cAAA,UAAQJ,MAAM,MAAKM,SAAC,oBACpBF,cAAA,UAAQJ,MAAM,MAAKM,SAAC,eACpBF,cAAA,UAAQJ,MAAM,MAAKM,SAAC,wBACpBF,cAAA,UAAQJ,MAAM,MAAKM,SAAC,qBACpBF,cAAA,UAAQJ,MAAM,MAAKM,SAAC,0BACpBF,cAAA,UAAQJ,MAAM,MAAKM,SAAC,0BACpBF,cAAA,UAAQJ,MAAM,MAAKM,SAAC,4BACpBF,cAAA,UAAQJ,MAAM,MAAKM,SAAC,uBACpBF,cAAA,UAAQJ,MAAM,MAAKM,SAAC,uBACpBF,cAAA,UAAQJ,MAAM,MAAKM,SAAC,yBAEtBF,cAACU,aAAU,CAAAR,SAAC,+CAEb5C,GACC0C,cAAA,OAAKK,UAAU,gBAAeH,SAC5BC,eAAA,OAAKE,UAAU,0BAAyBH,SAAA,CACtCF,cAAA,OACEwB,KApQKC,EAoQYnE,EAnQ1BmE,EACDA,EAASC,WAAW,gBACpBD,EAASC,WAAW,QADuBD,EAEzC,wBAANE,OAA+BF,GAHT,IAoQRG,IAAI,eACJvB,UAAU,0CACVwB,QAAUlC,IACRH,QAAQtC,MAAM,wBAAyByC,EAAEE,OAAO2B,KAChD7B,EAAEE,OAAOiC,MAAMC,QAAU,UAG7B/B,cAACgC,SAAM,CACLvB,KAAK,SACLwB,QA9LGC,KACjB7E,EAAY,MACZE,EAAe,IACf4E,SAASC,eAAe,eAAexC,MAAQ,IA4LjCS,UAAU,mEAAkEH,SAC7E,wBASTF,cAAA,MAAIK,UAAU,8DAA6DH,SAAC,uBAC5EC,eAAA,OAAKE,UAAU,wCAAuCH,SAAA,CACpDC,eAACG,QAAK,CAAAJ,SAAA,CACJF,cAAA,QAAAE,SAAM,8BACNF,cAACO,QAAK,CACJpB,KAAK,WACLS,MAAOjE,EAAKc,SACZ+D,SAAUd,EACVe,KAAK,SACL4B,IAAI,IACJC,IAAI,QAENtC,cAACU,aAAU,CAAAR,SAAC,6CAEdC,eAACG,QAAK,CAAAJ,SAAA,CACJF,cAAA,QAAAE,SAAM,qBACNF,cAACO,QAAK,CAACpB,KAAK,kBAAkBS,MAAOjE,EAAKgB,gBAAiB6D,SAAUd,IACrEM,cAACU,aAAU,CAAAR,SAAC,4DAEdC,eAACG,QAAK,CAAAJ,SAAA,CACJF,cAAA,QAAAE,SAAM,mBACNF,cAACO,QAAK,CAACpB,KAAK,gBAAgBS,MAAOjE,EAAKiB,cAAe4D,SAAUd,IACjEM,cAACU,aAAU,CAAAR,SAAC,0DAEdC,eAACG,QAAK,CAACD,UAAU,gBAAeH,SAAA,CAC9BF,cAAA,QAAAE,SAAM,uBACNF,cAAA,YACEb,KAAK,QACLS,MAAOjE,EAAKe,MACZ8D,SAAUd,EACVW,UAAU,iNACVkC,KAAK,IACLC,YAAY,+DAKjBtF,GACC8C,cAACU,aAAU,CAAC+B,OAAO,EAAOpC,UAAU,OAAMH,SAAEhD,IAG9C8C,cAAA,OAAKK,UAAU,OAAMH,SACnBF,cAACgC,SAAM,CACLC,QA/OWxE,UACnBR,GAAU,GACVE,EAAS,IACT,IACE,IAAIuF,EAAUpF,EACd,GAAIF,EACF,IACE,MAAMuF,QAAe,IAAIC,QAAQ,CAACC,EAASC,KACzC,MAAM9B,EAAS,IAAIC,WACnBD,EAAOE,OAAS,IAAM2B,EAAQ7B,EAAOI,QACrCJ,EAAO+B,QAAUD,EACjB9B,EAAOK,cAAcjE,KAGjB4F,QAAmBC,YAAI,6BAA8B,CAAEC,WAAYP,IAEzE,IAAIK,EAAWpF,QAGb,MAAM,IAAIuF,MAAMH,EAAWI,SAAW,sBAFtCV,EAAUM,EAAWN,OAIzB,CAAE,MAAOW,GAGP,OAFAlG,EAAS,0BAA4BkG,EAAUD,cAC/CnG,GAAU,EAEZ,CACA,MAAMqG,EAAU,CAChBpE,KAAM,CACJC,KAAMxD,EAAKE,SACXC,YAAaH,EAAKG,YAClBC,cAAeJ,EAAKI,eAEtBqD,SAAU,CACRD,KAAMxD,EAAKK,aACXqD,UAAW1D,EAAKM,kBAChBC,QAASP,EAAKO,QACdC,UAAWR,EAAKQ,UAChBC,YAAaT,EAAKS,YAClBC,MAAOV,EAAKU,MACZC,IAAKX,EAAKW,IACVC,KAAMmG,EACNlG,MAAOb,EAAKa,MACZK,SAAUlB,EAAKkB,UAEjByC,UAAW,CACT7C,SAAU8G,OAAO5H,EAAKc,UACtBC,MAAOf,EAAKe,MACZC,gBAAiBhB,EAAKgB,gBACtBC,cAAejB,EAAKiB,cAAeC,SAAUlB,EAAKkB,WAIhDa,QAAYuF,YAAI,iBAAkBK,GACpC5F,EAAIE,SACNnC,EAAUiC,EAAIsB,KAAKC,eACnBuE,MAAM,oCACNC,OAAOC,cAAc,IAAIC,YAAY,kBAAmB,CAAEC,OAAQ,CAAE/G,SAAUlB,EAAKkB,cAGnFM,EAASO,EAAI0F,SAAW,cAE5B,CAAE,MAAO7D,GAAM,IAADsE,EAAAC,EACZ3G,GAAqB,QAAZ0G,EAAAtE,EAAIwE,gBAAQ,IAAAF,GAAM,QAANC,EAAZD,EAAc7E,YAAI,IAAA8E,OAAN,EAAZA,EAAoBV,UAAW7D,EAAI6D,SAAW,eACvD5D,QAAQtC,MAAMqC,EAChB,CAAC,QACCtC,GAAU,EACZ,GA8KQ6E,MAAO,CAAEkC,gBAAiB,WAC1B3D,UAAU,aACV4D,SAAUjH,EAAOkD,SAEhBlD,EAAS,YAAexB,EAAS,uBAAyB,+BAzUhDiG,KA+UvB,C,kCCjXA,gBAQexB,IANf,SAAkBiE,GAAgB,IAAf,SAAEhE,GAAUgE,EAC7B,OACElE,cAAA,MAAIK,UAAU,+DAA8DH,SAAEA,GAElF,C","file":"static/js/21.d4fcf023.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { get, put, uploadFile } from '../../api/axios';\r\nimport {\r\n  Button, Label, Input, HelperText, Select\r\n} from '@windmill/react-ui';\r\nimport PageTitle from '../../components/Typography/PageTitle';\r\n\r\nfunction Configuration() {\r\n  const history = useHistory();\r\n  const [config, setConfig] = useState(null);\r\n  const [form, setForm] = useState({\r\n    bankName: '',\r\n    accountName: '',\r\n    accountNumber: '',\r\n    businessName: '',\r\n    businessNameColor: '#333333',\r\n    address: '',\r\n    mobileNum: '',\r\n    businessNum: '',\r\n    email: '',\r\n    web: '',\r\n    logo: '',\r\n    taxId: '',\r\n    validity: 30,\r\n    terms: '',\r\n    quotationPrefix: 'QUO',\r\n    invoicePrefix: 'INV', currency: 'USD'\r\n  });\r\n  const [loading, setLoading] = useState(true);\r\n  const [saving, setSaving] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [logoFile, setLogoFile] = useState(null);\r\n  const [logoPreview, setLogoPreview] = useState('');\r\n  const getImageUrl = (logoPath) => {\r\n    if (!logoPath) return '';\r\n    if (logoPath.startsWith('data:image/')) return logoPath;\r\n    if (logoPath.startsWith('http')) return logoPath; \r\n    return `http://localhost:5000${logoPath}`; \r\n  };\r\n  const currencies = [\r\n    { code: 'USD', symbol: '$', name: 'US Dollar' },\r\n    { code: 'EUR', symbol: '€', name: 'Euro' },\r\n    { code: 'GBP', symbol: '£', name: 'British Pound' },\r\n    { code: 'PKR', symbol: '₨', name: 'Pakistani Rupee' },\r\n    { code: 'AED', symbol: 'د.إ', name: 'UAE Dirham' },\r\n    { code: 'CAD', symbol: 'C$', name: 'Canadian Dollar' },\r\n    { code: 'AUD', symbol: 'A$', name: 'Australian Dollar' },\r\n    { code: 'JPY', symbol: '¥', name: 'Japanese Yen' },\r\n    { code: 'INR', symbol: '₹', name: 'Indian Rupee' },\r\n    { code: 'CHF', symbol: 'Fr', name: 'Swiss Franc' }\r\n  ];\r\n\r\n  useEffect(() => {\r\n    async function fetchConfig() {\r\n      setLoading(true);\r\n      try {\r\n        const res = await get('/configuration');\r\n        if (res.success) {\r\n          const c = res.data.configuration;\r\n          setConfig(c);\r\n          setForm({\r\n            bankName: c.bank?.name || '',\r\n            accountName: c.bank?.accountName || '',\r\n            accountNumber: c.bank?.accountNumber || '',\r\n            businessName: c.business?.name || '',\r\n            businessNameColor: c.business?.nameColor || '#333333', address: c.business?.address || '',\r\n            mobileNum: c.business?.mobileNum || '',\r\n            businessNum: c.business?.businessNum || '',\r\n            email: c.business?.email || '',\r\n            web: c.business?.web || '',\r\n            taxId: c.business?.taxId || '',\r\n            validity: c.quotation?.validity || 30,\r\n            terms: c.quotation?.terms || '',\r\n            quotationPrefix: c.quotation?.quotationPrefix || 'QUO',\r\n            invoicePrefix: c.quotation?.invoicePrefix || 'INV', currency: c.quotation?.currency || c.business?.currency\r\n          });\r\n          setLogoPreview(c.business?.logo || '');\r\n        }\r\n      } catch (err) {\r\n        console.error(err);\r\n        setError('Failed to load configuration');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n\r\n    fetchConfig();\r\n  }, []);\r\n\r\n  const handleChange = e => {\r\n    const { name, value } = e.target;\r\n    setForm(prev => ({ ...prev, [name]: value }));\r\n    if (error) setError('');\r\n  };\r\n\r\n  const handleLogoUpload = e => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      if (file.size > 5 * 1024 * 1024) { \r\n        setError('Logo file size should be less than 5MB');\r\n        return;\r\n      }\r\n\r\n      setLogoFile(file);\r\n      const reader = new FileReader();\r\n      reader.onload = (event) => {\r\n        setLogoPreview(event.target.result);\r\n      };\r\n      reader.readAsDataURL(file);\r\n      if (error) setError('');\r\n    }\r\n  };\r\n\r\n  const removeLogo = () => {\r\n    setLogoFile(null);\r\n    setLogoPreview('');\r\n    document.getElementById('logo-upload').value = '';\r\n  };\r\n  const handleSubmit = async () => {\r\n    setSaving(true);\r\n    setError('');\r\n    try {\r\n      let logoUrl = logoPreview;\r\n      if (logoFile) {\r\n        try {\r\n          const base64 = await new Promise((resolve, reject) => {\r\n            const reader = new FileReader();\r\n            reader.onload = () => resolve(reader.result);\r\n            reader.onerror = reject;\r\n            reader.readAsDataURL(logoFile);\r\n          });\r\n\r\n          const uploadData = await put('/configuration/upload-logo', { logoBase64: base64 });\r\n\r\n          if (uploadData.success) {\r\n            logoUrl = uploadData.logoUrl;\r\n          } else {\r\n            throw new Error(uploadData.message || 'Logo upload failed');\r\n          }\r\n        } catch (uploadErr) {\r\n          setError('Failed to upload logo: ' + uploadErr.message);\r\n          setSaving(false);\r\n          return;\r\n        }\r\n      } const payload = {\r\n        bank: {\r\n          name: form.bankName,\r\n          accountName: form.accountName,\r\n          accountNumber: form.accountNumber,\r\n        },\r\n        business: {\r\n          name: form.businessName,\r\n          nameColor: form.businessNameColor,\r\n          address: form.address,\r\n          mobileNum: form.mobileNum,\r\n          businessNum: form.businessNum,\r\n          email: form.email,\r\n          web: form.web,\r\n          logo: logoUrl,\r\n          taxId: form.taxId,\r\n          currency: form.currency\r\n        },\r\n        quotation: {\r\n          validity: Number(form.validity),\r\n          terms: form.terms,\r\n          quotationPrefix: form.quotationPrefix,\r\n          invoicePrefix: form.invoicePrefix, currency: form.currency\r\n        }\r\n      };\r\n\r\n      const res = await put('/configuration', payload);\r\n      if (res.success) {\r\n        setConfig(res.data.configuration);\r\n        alert('Configuration saved successfully');\r\n        window.dispatchEvent(new CustomEvent('currencyUpdated', { detail: { currency: form.currency } }));\r\n\r\n      } else {\r\n        setError(res.message || 'Save failed');\r\n      }\r\n    } catch (err) {\r\n      setError(err.response?.data?.message || err.message || 'Save failed');\r\n      console.error(err);\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  if (loading) return <PageTitle>Loading...</PageTitle>;\r\n\r\n  return (\r\n    <>\r\n      <div className=\"flex justify-between items-center mb-6\">\r\n        <PageTitle>Configuration</PageTitle>\r\n      </div>\r\n\r\n      <div className=\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg\">\r\n        {/* Bank Info Section */}\r\n        <h3 className=\"text-xl font-semibold mb-4 text-gray-800 dark:text-gray-200\">Bank Information</h3>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6\">\r\n          <Label>\r\n            <span>Bank Name</span>\r\n            <Input name=\"bankName\" value={form.bankName} onChange={handleChange} />\r\n          </Label>\r\n          <Label>\r\n            <span>Account Name</span>\r\n            <Input name=\"accountName\" value={form.accountName} onChange={handleChange} />\r\n          </Label>\r\n          <Label>\r\n            <span>Account Number</span>\r\n            <Input name=\"accountNumber\" value={form.accountNumber} onChange={handleChange} />\r\n          </Label>\r\n\r\n        </div>\r\n\r\n        {/* Business Info Section */}\r\n        <h3 className=\"text-xl font-semibold mb-4 text-gray-800 dark:text-gray-200\">Business Information</h3>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6\">\r\n          <Label>\r\n            <span>Business Name</span>\r\n            <Input name=\"businessName\" value={form.businessName} onChange={handleChange} />\r\n          </Label>\r\n          <Label>\r\n            <span>Business Name Color</span>\r\n            <input\r\n              type=\"color\"\r\n              name=\"businessNameColor\"\r\n              value={form.businessNameColor}\r\n              onChange={handleChange}\r\n              className=\"mt-1 block w-full h-10 border border-gray-300 rounded-md cursor-pointer\"\r\n            />\r\n            <HelperText>Choose color for business name in documents</HelperText>\r\n          </Label>\r\n          <Label>\r\n            <span>Business Address</span>\r\n            <Input name=\"address\" value={form.address} onChange={handleChange} />\r\n          </Label>\r\n          <Label>\r\n            <span>Mobile Number</span>\r\n            <Input name=\"mobileNum\" value={form.mobileNum} onChange={handleChange} />\r\n          </Label>\r\n          <Label>\r\n            <span>Business Number</span>\r\n            <Input name=\"businessNum\" value={form.businessNum} onChange={handleChange} />\r\n          </Label>\r\n          <Label>\r\n            <span>Email</span>\r\n            <Input name=\"email\" value={form.email} onChange={handleChange} type=\"email\" />\r\n          </Label>\r\n          <Label>\r\n            <span>Website URL</span>\r\n            <Input name=\"web\" value={form.web} onChange={handleChange} />\r\n          </Label>\r\n          <Label>\r\n            <span>Business Logo</span>\r\n            <input\r\n              id=\"logo-upload\"\r\n              type=\"file\"\r\n              accept=\"image/*\"\r\n              onChange={handleLogoUpload}\r\n              className=\"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100 dark:file:bg-gray-700 dark:file:text-gray-300\"\r\n            />\r\n            <HelperText>Upload an image file (max 5MB)</HelperText>\r\n          </Label>\r\n          <Label>\r\n            <span>Tax ID</span>\r\n            <Input name=\"taxId\" value={form.taxId} onChange={handleChange} />\r\n          </Label>\r\n          <Label>\r\n            <span>Default Currency *</span>\r\n            <Select\r\n              className=\"mt-1\"\r\n              name=\"currency\"\r\n              value={form.currency}\r\n              onChange={handleChange}\r\n              required\r\n            >\r\n              <option value=\"USD\">USD - US Dollar</option>\r\n              <option value=\"EUR\">EUR - Euro</option>\r\n              <option value=\"GBP\">GBP - British Pound</option>\r\n              <option value=\"AED\">AED - UAE Dirham</option>\r\n              <option value=\"PKR\">PKR - Pakistani Rupee</option>\r\n              <option value=\"CAD\">CAD - Canadian Dollar</option>\r\n              <option value=\"AUD\">AUD - Australian Dollar</option>\r\n              <option value=\"JPY\">JPY - Japanese Yen</option>\r\n              <option value=\"INR\">INR - Indian Rupee</option>\r\n              <option value=\"SAR\">SAR - Saudi Riyal</option>\r\n            </Select>\r\n            <HelperText>Currency for all quotations and pricing</HelperText>\r\n          </Label>\r\n          {logoPreview && (\r\n            <div className=\"md:col-span-2\">\r\n              <div className=\"flex items-center gap-4\">\r\n                <img\r\n                  src={getImageUrl(logoPreview)}\r\n                  alt=\"Logo Preview\"\r\n                  className=\"h-20 mt-2 object-contain rounded border\"\r\n                  onError={(e) => {\r\n                    console.error('Image failed to load:', e.target.src);\r\n                    e.target.style.display = 'none';\r\n                  }}\r\n                />\r\n                <Button\r\n                  type=\"button\"\r\n                  onClick={removeLogo}\r\n                  className=\"bg-red-500 hover:bg-red-600 text-white text-sm px-3 py-1 rounded\"\r\n                >\r\n                  Remove Logo\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Quotation Settings Section */}\r\n        <h3 className=\"text-xl font-semibold mb-4 text-gray-800 dark:text-gray-200\">Quotation Settings</h3>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n          <Label>\r\n            <span>Quotation Validity (Days)</span>\r\n            <Input\r\n              name=\"validity\"\r\n              value={form.validity}\r\n              onChange={handleChange}\r\n              type=\"number\"\r\n              min=\"1\"\r\n              max=\"365\"\r\n            />\r\n            <HelperText>How many days quotations remain valid</HelperText>\r\n          </Label>\r\n          <Label>\r\n            <span>Quotation Prefix</span>\r\n            <Input name=\"quotationPrefix\" value={form.quotationPrefix} onChange={handleChange} />\r\n            <HelperText>Prefix for quotation numbers (e.g., QUO-202409-0001)</HelperText>\r\n          </Label>\r\n          <Label>\r\n            <span>Invoice Prefix</span>\r\n            <Input name=\"invoicePrefix\" value={form.invoicePrefix} onChange={handleChange} />\r\n            <HelperText>Prefix for invoice numbers (e.g., INV-202409-0001)</HelperText>\r\n          </Label>\r\n          <Label className=\"md:col-span-2\">\r\n            <span>Terms & Conditions</span>\r\n            <textarea\r\n              name=\"terms\"\r\n              value={form.terms}\r\n              onChange={handleChange}\r\n              className=\"mt-1 block w-full pt-2 pl-2 border-2 border-gray-300 rounded-md shadow-sm focus:border-purple-300 focus:ring focus:ring-purple-200 focus:ring-opacity-50 dark:border-gray-600 dark:bg-gray-700 dark:text-white\"\r\n              rows=\"4\"\r\n              placeholder=\"Enter default terms and conditions for quotations...\"\r\n            />\r\n          </Label>\r\n        </div>\r\n\r\n        {error && (\r\n          <HelperText valid={false} className=\"mt-4\">{error}</HelperText>\r\n        )}\r\n\r\n        <div className=\"mt-6\">\r\n          <Button\r\n            onClick={handleSubmit}\r\n            style={{ backgroundColor: \"#AA1A21\" }}\r\n            className=\"text-white\"\r\n            disabled={saving}\r\n          >\r\n            {saving ? 'Saving...' : (config ? 'Update Configuration' : 'Save Configuration')}\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Configuration;","import React from 'react'\r\n\r\nfunction PageTitle({ children }) {\r\n  return (\r\n    <h1 className=\"my-6 text-2xl font-semibold text-gray-700 dark:text-gray-200\">{children}</h1>\r\n  )\r\n}\r\n\r\nexport default PageTitle\r\n"],"sourceRoot":""}