(this["webpackJsonpquotation-maker"]=this["webpackJsonpquotation-maker"]||[]).push([[17],{213:function(e,r,s){"use strict";s.r(r);var t=s(5),c=s(1),a=s(4),i=s(13),n=s(51),l=s(52),d=s(24),o=s(3);r.default=function(){const e=Object(a.g)(),[r,s]=Object(c.useState)({name:"",description:"",sellingPrice:0,purchasePrice:0,size:""}),[u,p]=Object(c.useState)([]),[j,b]=Object(c.useState)(!0),[h,m]=Object(c.useState)(!1),[g,x]=Object(c.useState)({}),[O,P]=Object(c.useState)("");Object(c.useEffect)(()=>{f()},[]);const f=async()=>{try{b(!0);const e=await Object(i.b)("/sizes/all");e.success?p(e.data.sizes):console.error("Error fetching sizes:",e.message)}catch(e){console.error("Error fetching sizes:",e)}finally{b(!1)}},v=e=>{const{name:r,value:c}=e.target;s(e=>Object(t.a)(Object(t.a)({},e),{},{[r]:"sellingPrice"===r||"purchasePrice"===r?parseFloat(c)||0:c})),g[r]&&x(e=>Object(t.a)(Object(t.a)({},e),{},{[r]:""})),O&&P("")},y=()=>{e.push("/app/products")};return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[Object(o.jsx)(n.a,{children:"Add New Product"}),Object(o.jsx)(d.Button,{type:"button",layout:"outline",onClick:y,disabled:h,children:"Back to Products"})]}),Object(o.jsxs)("div",{className:"px-4 py-3 mb-8 bg-white rounded-lg shadow-md dark:bg-gray-800",children:[Object(o.jsx)(l.a,{children:"Product Information"}),Object(o.jsxs)("form",{onSubmit:async s=>{if(s.preventDefault(),(()=>{const e={};return r.name.trim()?r.name.length>200&&(e.name="Product name cannot exceed 200 characters"):e.name="Product name is required",r.description&&r.description.length>1e3&&(e.description="Description cannot exceed 1000 characters"),r.size||(e.size="Size is required"),(!r.sellingPrice||r.sellingPrice<0)&&(e.sellingPrice="Selling price must be 0 or greater"),(!r.purchasePrice||r.purchasePrice<0)&&(e.purchasePrice="Purchase price must be 0 or greater"),x(e),0===Object.keys(e).length})()){m(!0),P("");try{const s={name:r.name.trim(),description:r.description.trim()||void 0,sellingPrice:parseFloat(r.sellingPrice),purchasePrice:parseFloat(r.purchasePrice),size:r.size},t=await Object(i.c)("/products",s);t.success?(alert("Product created successfully!"),e.push("/app/products")):P(t.message||"Failed to create product. Please try again.")}catch(l){var t,c,a,n;if(console.error("Error creating product:",l),null!==(t=l.response)&&void 0!==t&&null!==(c=t.data)&&void 0!==c&&c.message)P(l.response.data.message);else if(null!==(a=l.response)&&void 0!==a&&null!==(n=a.data)&&void 0!==n&&n.error){if("string"===typeof l.response.data.error)P(l.response.data.error);else if(l.response.data.error.errors){const e={};Object.keys(l.response.data.error.errors).forEach(r=>{e[r]=l.response.data.error.errors[r].message}),x(e)}}else l.message?P(l.message):P("Failed to create product. Please check your connection and try again.")}finally{m(!1)}}},children:[O&&Object(o.jsx)("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:O}),Object(o.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[Object(o.jsxs)(d.Label,{children:[Object(o.jsx)("span",{children:"Product Name *"}),Object(o.jsx)(d.Input,{className:"mt-1",name:"name",value:r.name,onChange:v,placeholder:"Enter product name",required:!0,valid:!g.name,maxLength:200}),g.name&&Object(o.jsx)(d.HelperText,{valid:!1,children:g.name})]}),Object(o.jsxs)(d.Label,{children:[Object(o.jsx)("span",{children:"Description"}),Object(o.jsx)("textarea",{className:"mt-1 block w-full pt-2 pl-2 border-2 border-gray-300 rounded-md shadow-sm focus:border-purple-300 focus:ring focus:ring-purple-200 focus:ring-opacity-50 dark:border-gray-600 dark:bg-gray-700 dark:text-white",name:"description",value:r.description,onChange:v,rows:"4",placeholder:"Enter product description (optional)",maxLength:1e3}),g.description&&Object(o.jsx)(d.HelperText,{valid:!1,children:g.description})]}),Object(o.jsxs)(d.Label,{children:[Object(o.jsx)("div",{className:"flex justify-between items-center",children:Object(o.jsx)("span",{children:"Size *"})}),j?Object(o.jsx)("div",{className:"mt-1 p-2 text-gray-500",children:"Loading sizes..."}):Object(o.jsxs)(d.Select,{className:"mt-1",name:"size",value:r.size,onChange:v,required:!0,valid:!g.size,children:[Object(o.jsx)("option",{value:"",children:"Select a size"}),u.map(e=>Object(o.jsx)("option",{value:e._id,children:e.name},e._id))]}),g.size&&Object(o.jsx)(d.HelperText,{valid:!1,children:g.size}),!j&&0===u.length&&Object(o.jsx)(d.HelperText,{valid:!1,children:"No sizes available. Please create sizes first."})]}),Object(o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Object(o.jsxs)(d.Label,{children:[Object(o.jsx)("span",{children:"Purchase Price *"}),Object(o.jsx)(d.Input,{className:"mt-1",name:"purchasePrice",type:"number",step:"0.01",min:"0",value:r.purchasePrice,onChange:v,placeholder:"0.00",required:!0,valid:!g.purchasePrice}),g.purchasePrice&&Object(o.jsx)(d.HelperText,{valid:!1,children:g.purchasePrice})]}),Object(o.jsxs)(d.Label,{children:[Object(o.jsx)("span",{children:"Selling Price *"}),Object(o.jsx)(d.Input,{className:"mt-1",name:"sellingPrice",type:"number",step:"0.01",min:"0",value:r.sellingPrice,onChange:v,placeholder:"0.00",required:!0,valid:!g.sellingPrice}),g.sellingPrice&&Object(o.jsx)(d.HelperText,{valid:!1,children:g.sellingPrice})]})]})]}),Object(o.jsxs)("div",{className:"flex justify-end space-x-4 mt-6",children:[Object(o.jsx)(d.Button,{type:"button",layout:"outline",onClick:y,disabled:h,children:"Cancel"}),Object(o.jsx)(d.Button,{type:"submit",style:{backgroundColor:"#AA1A21"},className:"text-white",disabled:h||j,children:h?"Creating...":"Create Product"})]})]})]})]})}},51:function(e,r,s){"use strict";s(1);var t=s(3);r.a=function(e){let{children:r}=e;return Object(t.jsx)("h1",{className:"my-6 text-2xl font-semibold text-gray-700 dark:text-gray-200",children:r})}},52:function(e,r,s){"use strict";s(1);var t=s(3);r.a=function(e){let{children:r}=e;return Object(t.jsx)("h2",{className:"mb-4 text-lg font-semibold text-gray-600 dark:text-gray-300",children:r})}}}]);
//# sourceMappingURL=17.6d38e8f9.chunk.js.map