(this["webpackJsonpquotation-maker"]=this["webpackJsonpquotation-maker"]||[]).push([[26],{213:function(e,t,a){"use strict";a.r(t);var s=a(1),c=a(4),l=a(13),n=a(51),i=a(24),r=a(61),o=a(3);t.default=function(){const e=Object(c.g)(),[t,a]=Object(s.useState)(1),[d,b]=Object(s.useState)([]),[j,u]=Object(s.useState)(!0),[x,h]=Object(s.useState)(""),[m,O]=Object(s.useState)(0),[g,p]=Object(s.useState)(0),[N,v]=Object(s.useState)(""),y=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{u(!0),h("");const a=new URLSearchParams({page:e.toString(),limit:10..toString()});t&&a.append("search",t);const s=await Object(l.b)("/quotations?".concat(a.toString()));s.success?(b(s.data.quotations),O(s.data.pagination.total),p(s.data.pagination.pages)):h(s.message||"Failed to fetch quotations")}catch(x){var a,s;h((null===(a=x.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message)||x.message||"Failed to fetch quotations"),console.error("Error fetching quotations:",x)}finally{u(!1)}},f=async(e,a)=>{if(window.confirm("Are you sure you want to delete quotation ".concat(a,"? This action cannot be undone.")))try{const a=await Object(l.a)("/quotations/".concat(e));a.success?(y(t,N),alert("Quotation deleted successfully")):alert(a.message||"Failed to delete quotation")}catch(x){var s,c;alert((null===(s=x.response)||void 0===s||null===(c=s.data)||void 0===c?void 0:c.message)||x.message||"Failed to delete quotation"),console.error("Error deleting quotation:",x)}};function w(e){a(e),y(e,N)}const C=e=>{switch(e){case"accepted":return"success";case"sent":return"primary";case"viewed":return"warning";case"draft":default:return"neutral";case"rejected":case"expired":return"danger"}},T=e=>{switch(e){case"accepted":case"approved":return"bg-green-500";case"sent":return"bg-blue-500";case"viewed":return"bg-yellow-500";case"draft":default:return"bg-gray-500";case"rejected":case"expired":return"bg-red-500"}},k=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return"".concat({USD:"$",EUR:"\u20ac",GBP:"\xa3",AED:"AED",PKR:"\u20a8",CAD:"C$",AUD:"A$",JPY:"\xa5",INR:"\u20b9",SAR:"SR"}[t]||t," ").concat(e.toLocaleString())};return Object(s.useEffect)(()=>{y(1,"")},[]),j?Object(o.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:Object(o.jsxs)("div",{className:"text-center",children:[Object(o.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-purple-600"}),Object(o.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading quotations..."})]})}):x?Object(o.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:Object(o.jsxs)("div",{className:"text-center",children:[Object(o.jsx)("div",{className:"text-red-500 text-xl mb-4",children:x}),Object(o.jsx)(i.Button,{onClick:()=>y(1,""),style:{backgroundColor:"#AA1A21"},className:"text-white",children:"Retry"})]})}):Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[Object(o.jsx)(n.a,{children:"Quotations"}),Object(o.jsx)(i.Button,{style:{backgroundColor:"#AA1A21"},className:"text-white",onClick:()=>e.push("/app/quotations/create"),children:"Create Quotation"})]}),Object(o.jsx)("div",{className:"mb-4",children:Object(o.jsx)(i.Input,{placeholder:"Search quotations by number, title, or description...",value:N,onChange:e=>{const t=e.target.value;v(t),a(1);const s=setTimeout(()=>{y(1,t)},500);return()=>clearTimeout(s)},className:"w-full md:w-1/3"})}),0!==d.length||N?0===d.length&&N?Object(o.jsxs)("div",{className:"text-center py-12",children:[Object(o.jsxs)("p",{className:"text-gray-600 text-lg mb-4",children:['No quotations found for "',N,'"']}),Object(o.jsx)(i.Button,{layout:"outline",onClick:()=>{v(""),y(1,"")},children:"Clear Search"})]}):Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{className:"hidden md:block",children:Object(o.jsxs)(i.TableContainer,{className:"mb-8",children:[Object(o.jsxs)(i.Table,{children:[Object(o.jsx)(i.TableHeader,{children:Object(o.jsxs)("tr",{children:[Object(o.jsx)(i.TableCell,{children:"Status"}),Object(o.jsx)(i.TableCell,{children:"Quotation No"}),Object(o.jsx)(i.TableCell,{children:"Title"}),Object(o.jsx)(i.TableCell,{children:"Client"}),Object(o.jsx)(i.TableCell,{children:"Date"}),Object(o.jsx)(i.TableCell,{children:"Valid Until"}),Object(o.jsx)(i.TableCell,{children:"Total Amount"}),Object(o.jsx)(i.TableCell,{children:"Actions"})]})}),Object(o.jsx)(i.TableBody,{children:d.map(t=>{var a,s;return Object(o.jsxs)(i.TableRow,{children:[Object(o.jsx)(i.TableCell,{children:Object(o.jsx)(i.Badge,{type:C(t.status),children:t.status.charAt(0).toUpperCase()+t.status.slice(1)})}),Object(o.jsx)(i.TableCell,{children:Object(o.jsx)("span",{className:"font-semibold",children:t.quotationNo})}),Object(o.jsx)(i.TableCell,{children:Object(o.jsx)("span",{className:"text-sm",children:t.title})}),Object(o.jsx)(i.TableCell,{children:Object(o.jsxs)("div",{className:"text-sm",children:[Object(o.jsx)("div",{className:"font-semibold",children:(null===(a=t.client)||void 0===a?void 0:a.name)||"N/A"}),Object(o.jsx)("div",{className:"text-gray-600",children:(null===(s=t.client)||void 0===s?void 0:s.businessName)||""})]})}),Object(o.jsx)(i.TableCell,{children:Object(o.jsx)("span",{className:"text-sm",children:new Date(t.date).toLocaleDateString()})}),Object(o.jsx)(i.TableCell,{children:Object(o.jsx)("span",{className:"text-sm ".concat(new Date(t.validUntil)<new Date?"text-red-600":""),children:new Date(t.validUntil).toLocaleDateString()})}),Object(o.jsx)(i.TableCell,{children:Object(o.jsx)("span",{className:"text-sm font-semibold",children:k(t.totalAmount,t.currency||"USD")})}),Object(o.jsx)(i.TableCell,{children:Object(o.jsxs)("div",{className:"flex items-center space-x-2",children:[Object(o.jsx)(i.Button,{layout:"link",size:"icon","aria-label":"View",onClick:()=>e.push("/app/quotations/view/".concat(t._id)),children:Object(o.jsx)(r.l,{className:"w-4 h-4"})}),Object(o.jsx)(i.Button,{layout:"link",size:"icon","aria-label":"Edit",onClick:()=>e.push("/app/quotations/edit/".concat(t._id)),disabled:"accepted"===t.status||"expired"===t.status,children:Object(o.jsx)(r.p,{className:"w-4 h-4"})}),Object(o.jsx)(i.Button,{layout:"link",size:"icon","aria-label":"Delete",onClick:()=>f(t._id,t.quotationNo),disabled:"accepted"===t.status,children:Object(o.jsx)(r.u,{className:"w-4 h-4"})})]})})]},t._id)})})]}),g>1&&Object(o.jsx)(i.TableFooter,{children:Object(o.jsx)(i.Pagination,{totalResults:m,resultsPerPage:10,onChange:w,label:"Table navigation"})})]})}),Object(o.jsxs)("div",{className:"block md:hidden",children:[Object(o.jsx)("div",{className:"space-y-4 mb-8",children:d.map(t=>{var a,s;return Object(o.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-4 shadow-sm border border-green-200 relative",children:[Object(o.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[Object(o.jsx)("div",{className:"".concat(T(t.status)," text-white text-xs font-semibold px-3 py-1 rounded-full uppercase tracking-wide"),children:"accepted"===t.status?"APPROVED":t.status.toUpperCase()}),Object(o.jsx)("div",{className:"text-gray-600 font-medium text-sm",children:t.quotationNo})]}),Object(o.jsx)("h3",{className:"text-gray-800 font-semibold text-lg mb-4 leading-tight",children:t.title}),Object(o.jsxs)("div",{className:"flex items-center mb-2 text-gray-600",children:[Object(o.jsx)(r.r,{className:"w-4 h-4 mr-2 flex-shrink-0"}),Object(o.jsx)("span",{className:"text-sm font-medium",children:(null===(a=t.client)||void 0===a?void 0:a.name)||"N/A"})]}),(null===(s=t.client)||void 0===s?void 0:s.businessName)&&Object(o.jsxs)("div",{className:"flex items-center mb-2 text-gray-600",children:[Object(o.jsx)(r.d,{className:"w-4 h-4 mr-2 flex-shrink-0"}),Object(o.jsx)("span",{className:"text-sm",children:t.client.businessName})]}),Object(o.jsxs)("div",{className:"flex items-center mb-4 text-gray-600",children:[Object(o.jsx)(r.e,{className:"w-4 h-4 mr-2 flex-shrink-0"}),Object(o.jsxs)("span",{className:"text-sm ".concat(new Date(t.validUntil)<new Date?"text-red-600":""),children:["Valid until ",new Date(t.validUntil).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"})]})]}),Object(o.jsx)("div",{className:"text-3xl font-bold text-green-700 mb-4",children:k(t.totalAmount,t.currency||"USD")}),Object(o.jsxs)("div",{className:"flex justify-end space-x-2",children:[Object(o.jsx)("button",{onClick:()=>e.push("/app/quotations/view/".concat(t._id)),className:"bg-white border border-gray-300 rounded-lg p-2 hover:bg-gray-50 transition-colors","aria-label":"View",children:Object(o.jsx)(r.l,{className:"w-5 h-5 text-gray-600"})}),Object(o.jsx)("button",{onClick:()=>e.push("/app/quotations/edit/".concat(t._id)),disabled:"accepted"===t.status||"expired"===t.status,className:"bg-white border border-gray-300 rounded-lg p-2 transition-colors ".concat("accepted"===t.status||"expired"===t.status?"opacity-50 cursor-not-allowed":"hover:bg-gray-50"),"aria-label":"Edit",children:Object(o.jsx)(r.p,{className:"w-5 h-5 text-gray-600"})}),Object(o.jsx)("button",{onClick:()=>f(t._id,t.quotationNo),disabled:"accepted"===t.status,className:"bg-white border border-gray-300 rounded-lg p-2 transition-colors ".concat("accepted"===t.status?"opacity-50 cursor-not-allowed":"hover:bg-gray-50"),"aria-label":"Delete",children:Object(o.jsx)(r.u,{className:"w-5 h-5 text-gray-600"})})]})]},t._id)})}),g>1&&Object(o.jsx)("div",{className:"flex justify-center",children:Object(o.jsx)(i.Pagination,{totalResults:m,resultsPerPage:10,onChange:w,label:"Table navigation"})})]})]}):Object(o.jsxs)("div",{className:"text-center py-12",children:[Object(o.jsx)("p",{className:"text-gray-600 text-lg mb-4",children:"No quotations found"}),Object(o.jsx)(i.Button,{style:{backgroundColor:"#AA1A21"},className:"text-white",onClick:()=>e.push("/app/quotations/create"),children:"Create Your First Quotation"})]})]})}},51:function(e,t,a){"use strict";a(1);var s=a(3);t.a=function(e){let{children:t}=e;return Object(s.jsx)("h1",{className:"my-6 text-2xl font-semibold text-gray-700 dark:text-gray-200",children:t})}}}]);
//# sourceMappingURL=26.dbf882ce.chunk.js.map