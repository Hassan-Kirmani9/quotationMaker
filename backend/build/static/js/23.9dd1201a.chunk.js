(this["webpackJsonpquotation-maker"]=this["webpackJsonpquotation-maker"]||[]).push([[23],{205:function(e,t,a){"use strict";a.r(t);var r=a(1),s=a(4),c=a(13),l=a(25),i=a(51),d=a(24),o=a(61),n=a(191),x=a(53),b=a(3);t.default=()=>{const e=Object(s.g)(),{formatCurrency:t}=Object(l.b)(),[a,g]=Object(r.useState)(!0),[j,m]=Object(r.useState)(""),[h,u]=Object(r.useState)({quotations:{total:0,recent:[]},clients:{total:0,recent:[]},products:{total:0,recent:[]},stats:{totalRevenue:0,acceptedQuotations:0,pendingQuotations:0,conversionRate:0}}),p=async()=>{try{var e,t,a,r,s,l;g(!0),m("");const[i,d,o]=await Promise.all([Object(c.b)("/quotations?limit=5&page=1"),Object(c.b)("/clients?limit=5&page=1"),Object(c.b)("/products?limit=5&page=1")]),n=i.success?i.data.quotations:[],x=d.success?d.data.clients:[],b=o.success?o.data.products:[],j=n.filter(e=>"accepted"===e.status),h=n.filter(e=>["sent","viewed","draft"].includes(e.status)),p=j.reduce((e,t)=>e+(t.totalAmount||0),0),y=n.length>0?j.length/n.length*100:0;u({quotations:{total:(null===(e=i.data)||void 0===e||null===(t=e.pagination)||void 0===t?void 0:t.total)||n.length,recent:n},clients:{total:(null===(a=d.data)||void 0===a||null===(r=a.pagination)||void 0===r?void 0:r.total)||x.length,recent:x},products:{total:(null===(s=o.data)||void 0===s||null===(l=s.pagination)||void 0===l?void 0:l.total)||b.length,recent:b},stats:{totalRevenue:p,acceptedQuotations:j.length,pendingQuotations:h.length,conversionRate:Math.round(y)}})}catch(j){console.error("Error fetching dashboard data:",j),m("Failed to load dashboard data")}finally{g(!1)}};Object(r.useEffect)(()=>{p()},[]);const y=e=>{let{title:t,value:a,icon:r,color:s,trend:c}=e;return Object(b.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-100 dark:border-gray-700 hover:shadow-md transition-shadow",children:Object(b.jsxs)("div",{className:"flex items-center justify-between",children:[Object(b.jsxs)("div",{className:"flex-1",children:[Object(b.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:t}),Object(b.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a}),c&&Object(b.jsxs)("div",{className:"flex items-center mt-2 text-sm ".concat(c>0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:[c>0?Object(b.jsx)(o.c,{className:"w-4 h-4 mr-1"}):Object(b.jsx)(o.b,{className:"w-4 h-4 mr-1"}),Object(b.jsxs)("span",{children:[Math.abs(c),"% from last month"]})]})]}),Object(b.jsx)("div",{className:"p-3 rounded-lg ".concat(s),children:Object(b.jsx)(r,{className:"w-6 h-6 dark:text-white text-black"})})]})})},O=e=>{let{title:t,description:a,icon:r,color:s,onClick:c}=e;return Object(b.jsx)("button",{onClick:c,className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-100 dark:border-gray-700 hover:shadow-md transition-all text-left w-full group",children:Object(b.jsxs)("div",{className:"flex items-start space-x-4",children:[Object(b.jsx)("div",{className:"p-3 rounded-lg ".concat(s," group-hover:scale-110 transition-transform"),children:Object(b.jsx)(r,{className:"w-6 h-6 dark:text-white text-black"})}),Object(b.jsxs)("div",{className:"flex-1",children:[Object(b.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:t}),Object(b.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:a})]})]})})},k=e=>{let{title:a,subtitle:r,status:s,amount:c,date:l,onClick:i}=e;return Object(b.jsxs)("div",{className:"flex items-center justify-between p-4 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-lg transition-colors cursor-pointer",onClick:i,children:[Object(b.jsxs)("div",{className:"flex-1",children:[Object(b.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white",children:a}),Object(b.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:r}),l&&Object(b.jsxs)("div",{className:"flex items-center mt-1 text-xs text-gray-500 dark:text-gray-400",children:[Object(b.jsx)(o.e,{className:"w-3 h-3 mr-1"}),new Date(l).toLocaleDateString()]})]}),Object(b.jsxs)("div",{className:"text-right",children:[c&&Object(b.jsx)("p",{className:"font-semibold text-gray-900 dark:text-white",children:t(c)}),s&&Object(b.jsx)("span",{className:"inline-block px-2 py-1 rounded-full text-xs font-medium ".concat("accepted"===s?"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100":"sent"===s?"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100":"viewed"===s?"bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100":"draft"===s?"bg-gray-100 text-gray-800 dark:bg-gray-600 dark:text-gray-100":"bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100"),children:s.charAt(0).toUpperCase()+s.slice(1)})]})]})};return a?Object(b.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900",children:Object(b.jsxs)("div",{className:"text-center",children:[Object(b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),Object(b.jsx)("p",{className:"mt-4 text-gray-600 dark:text-gray-300",children:"Loading dashboard..."})]})}):j?Object(b.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900",children:Object(b.jsxs)("div",{className:"text-center",children:[Object(b.jsx)("div",{className:"text-red-500 text-xl mb-4",children:j}),Object(b.jsx)(d.Button,{onClick:p,style:{backgroundColor:"#AA1A21"},className:"text-white",children:"Retry"})]})}):Object(b.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:Object(b.jsxs)("div",{className:"p-6 space-y-8",children:[Object(b.jsx)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0",children:Object(b.jsxs)("div",{children:[Object(b.jsx)(i.a,{children:"Dashboard"}),Object(b.jsx)("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Welcome back! Here's what's happening with your business."})]})}),Object(b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[Object(b.jsx)(y,{title:"Total Revenue",value:t(h.stats.totalRevenue),icon:o.v,color:"bg-gradient-to-r from-green-500 to-green-600"}),Object(b.jsx)(y,{title:"Accepted Quotations",value:h.stats.acceptedQuotations,icon:o.h,color:"bg-gradient-to-r from-blue-500 to-blue-600"}),Object(b.jsx)(y,{title:"Pending Quotations",value:h.stats.pendingQuotations,icon:n.a,color:"bg-gradient-to-r from-yellow-500 to-yellow-600"}),Object(b.jsx)(y,{title:"Conversion Rate",value:"".concat(h.stats.conversionRate,"%"),icon:o.v,color:"bg-gradient-to-r from-purple-500 to-purple-600"})]}),Object(b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-100 dark:border-gray-700",children:[Object(b.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Quick Actions"}),Object(b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[Object(b.jsx)(O,{title:"Create Quotation",description:"Start a new quotation for your client",icon:o.k,color:"bg-gradient-to-r from-indigo-500 to-indigo-600",onClick:()=>e.push("/app/quotations/create")}),Object(b.jsx)(O,{title:"Add Client",description:"Register a new client in your system",icon:o.q,color:"bg-gradient-to-r from-green-500 to-green-600",onClick:()=>e.push("/app/clients/create")}),Object(b.jsx)(O,{title:"Add Product",description:"Add a new product to your catalog",icon:o.g,color:"bg-gradient-to-r from-purple-500 to-purple-600",onClick:()=>e.push("/app/products/create")})]})]}),Object(b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[Object(b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700",children:[Object(b.jsx)("div",{className:"p-6 border-b border-gray-100 dark:border-gray-700",children:Object(b.jsxs)("div",{className:"flex items-center justify-between",children:[Object(b.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent Quotations"}),Object(b.jsx)(d.Button,{layout:"link",onClick:()=>e.push("/app/quotations"),className:"text-indigo-600 hover:text-indigo-700 dark:text-indigo-400 dark:hover:text-indigo-300",children:"View All"})]})}),Object(b.jsx)("div",{className:"p-2",children:h.quotations.recent.length>0?h.quotations.recent.map(t=>Object(b.jsx)(k,{title:t.quotationNo,subtitle:t.title,status:t.status,amount:t.totalAmount,date:t.createdAt,onClick:()=>e.push("/app/quotations/view/".concat(t._id))},t._id)):Object(b.jsxs)("div",{className:"p-8 text-center",children:[Object(b.jsx)(o.k,{className:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-3"}),Object(b.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"No quotations yet"}),Object(b.jsx)(d.Button,{onClick:()=>e.push("/app/quotations/create"),className:"mt-3",style:{backgroundColor:"#AA1A21"},children:"Create First Quotation"})]})})]}),Object(b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700",children:[Object(b.jsx)("div",{className:"p-6 border-b border-gray-100 dark:border-gray-700",children:Object(b.jsxs)("div",{className:"flex items-center justify-between",children:[Object(b.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent Clients"}),Object(b.jsx)(d.Button,{layout:"link",onClick:()=>e.push("/app/clients"),className:"text-indigo-600 hover:text-indigo-700 dark:text-indigo-400 dark:hover:text-indigo-300",children:"View All"})]})}),Object(b.jsx)("div",{className:"p-2",children:h.clients.recent.length>0?h.clients.recent.map(t=>Object(b.jsx)(k,{title:t.name,subtitle:t.businessName,date:t.createdAt,onClick:()=>e.push("/app/clients")},t._id)):Object(b.jsxs)("div",{className:"p-8 text-center",children:[Object(b.jsx)(o.q,{className:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-3"}),Object(b.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"No clients yet"}),Object(b.jsx)(d.Button,{onClick:()=>e.push("/app/clients/create"),className:"mt-3",style:{backgroundColor:"#AA1A21"},children:"Add First Client"})]})})]})]}),Object(b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[Object(b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-100 dark:border-gray-700 text-center",children:[Object(b.jsx)("div",{className:"w-12 h-12 bg-indigo-100 dark:bg-indigo-900 rounded-lg flex items-center justify-center mx-auto mb-3",children:Object(b.jsx)(x.ChartsIcon,{className:"w-6 h-6 text-indigo-600 dark:text-indigo-400"})}),Object(b.jsx)("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:h.quotations.total}),Object(b.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Total Quotations"})]}),Object(b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-100 dark:border-gray-700 text-center",children:[Object(b.jsx)("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-900 rounded-lg flex items-center justify-center mx-auto mb-3",children:Object(b.jsx)(x.PeopleIcon,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),Object(b.jsx)("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:h.clients.total}),Object(b.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Total Clients"})]}),Object(b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-100 dark:border-gray-700 text-center",children:[Object(b.jsx)("div",{className:"w-12 h-12 bg-purple-100 dark:bg-purple-900 rounded-lg flex items-center justify-center mx-auto mb-3",children:Object(b.jsx)(x.MoneyIcon,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),Object(b.jsx)("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:h.products.total}),Object(b.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Total Products"})]})]})]})})}},51:function(e,t,a){"use strict";a(1);var r=a(3);t.a=function(e){let{children:t}=e;return Object(r.jsx)("h1",{className:"my-6 text-2xl font-semibold text-gray-700 dark:text-gray-200",children:t})}}}]);
//# sourceMappingURL=23.9dd1201a.chunk.js.map