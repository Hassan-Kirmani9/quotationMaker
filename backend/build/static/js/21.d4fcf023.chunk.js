(this["webpackJsonpquotation-maker"]=this["webpackJsonpquotation-maker"]||[]).push([[21],{208:function(e,a,n){"use strict";n.r(a);var s=n(5),t=n(1),i=n(4),o=n(13),l=n(24),c=n(51),r=n(3);a.default=function(){Object(i.g)();const[e,a]=Object(t.useState)(null),[n,d]=Object(t.useState)({bankName:"",accountName:"",accountNumber:"",businessName:"",businessNameColor:"#333333",address:"",mobileNum:"",businessNum:"",email:"",web:"",logo:"",taxId:"",validity:30,terms:"",quotationPrefix:"QUO",invoicePrefix:"INV",currency:"USD"}),[u,b]=Object(t.useState)(!0),[j,m]=Object(t.useState)(!1),[x,h]=Object(t.useState)(""),[v,g]=Object(t.useState)(null),[p,O]=Object(t.useState)("");Object(t.useEffect)(()=>{!async function(){b(!0);try{const b=await Object(o.b)("/configuration");if(b.success){var e,n,s,t,i,l,c,r,u,j,m,x,v,g,p,f,N,y;const o=b.data.configuration;a(o),d({bankName:(null===(e=o.bank)||void 0===e?void 0:e.name)||"",accountName:(null===(n=o.bank)||void 0===n?void 0:n.accountName)||"",accountNumber:(null===(s=o.bank)||void 0===s?void 0:s.accountNumber)||"",businessName:(null===(t=o.business)||void 0===t?void 0:t.name)||"",businessNameColor:(null===(i=o.business)||void 0===i?void 0:i.nameColor)||"#333333",address:(null===(l=o.business)||void 0===l?void 0:l.address)||"",mobileNum:(null===(c=o.business)||void 0===c?void 0:c.mobileNum)||"",businessNum:(null===(r=o.business)||void 0===r?void 0:r.businessNum)||"",email:(null===(u=o.business)||void 0===u?void 0:u.email)||"",web:(null===(j=o.business)||void 0===j?void 0:j.web)||"",taxId:(null===(m=o.business)||void 0===m?void 0:m.taxId)||"",validity:(null===(x=o.quotation)||void 0===x?void 0:x.validity)||30,terms:(null===(v=o.quotation)||void 0===v?void 0:v.terms)||"",quotationPrefix:(null===(g=o.quotation)||void 0===g?void 0:g.quotationPrefix)||"QUO",invoicePrefix:(null===(p=o.quotation)||void 0===p?void 0:p.invoicePrefix)||"INV",currency:(null===(f=o.quotation)||void 0===f?void 0:f.currency)||(null===(N=o.business)||void 0===N?void 0:N.currency)}),O((null===(y=o.business)||void 0===y?void 0:y.logo)||"")}}catch(C){console.error(C),h("Failed to load configuration")}finally{b(!1)}}()},[]);const f=e=>{const{name:a,value:n}=e.target;d(e=>Object(s.a)(Object(s.a)({},e),{},{[a]:n})),x&&h("")};return u?Object(r.jsx)(c.a,{children:"Loading..."}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{className:"flex justify-between items-center mb-6",children:Object(r.jsx)(c.a,{children:"Configuration"})}),Object(r.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg",children:[Object(r.jsx)("h3",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-gray-200",children:"Bank Information"}),Object(r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[Object(r.jsxs)(l.Label,{children:[Object(r.jsx)("span",{children:"Bank Name"}),Object(r.jsx)(l.Input,{name:"bankName",value:n.bankName,onChange:f})]}),Object(r.jsxs)(l.Label,{children:[Object(r.jsx)("span",{children:"Account Name"}),Object(r.jsx)(l.Input,{name:"accountName",value:n.accountName,onChange:f})]}),Object(r.jsxs)(l.Label,{children:[Object(r.jsx)("span",{children:"Account Number"}),Object(r.jsx)(l.Input,{name:"accountNumber",value:n.accountNumber,onChange:f})]})]}),Object(r.jsx)("h3",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-gray-200",children:"Business Information"}),Object(r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[Object(r.jsxs)(l.Label,{children:[Object(r.jsx)("span",{children:"Business Name"}),Object(r.jsx)(l.Input,{name:"businessName",value:n.businessName,onChange:f})]}),Object(r.jsxs)(l.Label,{children:[Object(r.jsx)("span",{children:"Business Name Color"}),Object(r.jsx)("input",{type:"color",name:"businessNameColor",value:n.businessNameColor,onChange:f,className:"mt-1 block w-full h-10 border border-gray-300 rounded-md cursor-pointer"}),Object(r.jsx)(l.HelperText,{children:"Choose color for business name in documents"})]}),Object(r.jsxs)(l.Label,{children:[Object(r.jsx)("span",{children:"Business Address"}),Object(r.jsx)(l.Input,{name:"address",value:n.address,onChange:f})]}),Object(r.jsxs)(l.Label,{children:[Object(r.jsx)("span",{children:"Mobile Number"}),Object(r.jsx)(l.Input,{name:"mobileNum",value:n.mobileNum,onChange:f})]}),Object(r.jsxs)(l.Label,{children:[Object(r.jsx)("span",{children:"Business Number"}),Object(r.jsx)(l.Input,{name:"businessNum",value:n.businessNum,onChange:f})]}),Object(r.jsxs)(l.Label,{children:[Object(r.jsx)("span",{children:"Email"}),Object(r.jsx)(l.Input,{name:"email",value:n.email,onChange:f,type:"email"})]}),Object(r.jsxs)(l.Label,{children:[Object(r.jsx)("span",{children:"Website URL"}),Object(r.jsx)(l.Input,{name:"web",value:n.web,onChange:f})]}),Object(r.jsxs)(l.Label,{children:[Object(r.jsx)("span",{children:"Business Logo"}),Object(r.jsx)("input",{id:"logo-upload",type:"file",accept:"image/*",onChange:e=>{const a=e.target.files[0];if(a){if(a.size>5242880)return void h("Logo file size should be less than 5MB");g(a);const e=new FileReader;e.onload=e=>{O(e.target.result)},e.readAsDataURL(a),x&&h("")}},className:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100 dark:file:bg-gray-700 dark:file:text-gray-300"}),Object(r.jsx)(l.HelperText,{children:"Upload an image file (max 5MB)"})]}),Object(r.jsxs)(l.Label,{children:[Object(r.jsx)("span",{children:"Tax ID"}),Object(r.jsx)(l.Input,{name:"taxId",value:n.taxId,onChange:f})]}),Object(r.jsxs)(l.Label,{children:[Object(r.jsx)("span",{children:"Default Currency *"}),Object(r.jsxs)(l.Select,{className:"mt-1",name:"currency",value:n.currency,onChange:f,required:!0,children:[Object(r.jsx)("option",{value:"USD",children:"USD - US Dollar"}),Object(r.jsx)("option",{value:"EUR",children:"EUR - Euro"}),Object(r.jsx)("option",{value:"GBP",children:"GBP - British Pound"}),Object(r.jsx)("option",{value:"AED",children:"AED - UAE Dirham"}),Object(r.jsx)("option",{value:"PKR",children:"PKR - Pakistani Rupee"}),Object(r.jsx)("option",{value:"CAD",children:"CAD - Canadian Dollar"}),Object(r.jsx)("option",{value:"AUD",children:"AUD - Australian Dollar"}),Object(r.jsx)("option",{value:"JPY",children:"JPY - Japanese Yen"}),Object(r.jsx)("option",{value:"INR",children:"INR - Indian Rupee"}),Object(r.jsx)("option",{value:"SAR",children:"SAR - Saudi Riyal"})]}),Object(r.jsx)(l.HelperText,{children:"Currency for all quotations and pricing"})]}),p&&Object(r.jsx)("div",{className:"md:col-span-2",children:Object(r.jsxs)("div",{className:"flex items-center gap-4",children:[Object(r.jsx)("img",{src:(N=p,N?N.startsWith("data:image/")||N.startsWith("http")?N:"http://localhost:5000".concat(N):""),alt:"Logo Preview",className:"h-20 mt-2 object-contain rounded border",onError:e=>{console.error("Image failed to load:",e.target.src),e.target.style.display="none"}}),Object(r.jsx)(l.Button,{type:"button",onClick:()=>{g(null),O(""),document.getElementById("logo-upload").value=""},className:"bg-red-500 hover:bg-red-600 text-white text-sm px-3 py-1 rounded",children:"Remove Logo"})]})})]}),Object(r.jsx)("h3",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-gray-200",children:"Quotation Settings"}),Object(r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Object(r.jsxs)(l.Label,{children:[Object(r.jsx)("span",{children:"Quotation Validity (Days)"}),Object(r.jsx)(l.Input,{name:"validity",value:n.validity,onChange:f,type:"number",min:"1",max:"365"}),Object(r.jsx)(l.HelperText,{children:"How many days quotations remain valid"})]}),Object(r.jsxs)(l.Label,{children:[Object(r.jsx)("span",{children:"Quotation Prefix"}),Object(r.jsx)(l.Input,{name:"quotationPrefix",value:n.quotationPrefix,onChange:f}),Object(r.jsx)(l.HelperText,{children:"Prefix for quotation numbers (e.g., QUO-202409-0001)"})]}),Object(r.jsxs)(l.Label,{children:[Object(r.jsx)("span",{children:"Invoice Prefix"}),Object(r.jsx)(l.Input,{name:"invoicePrefix",value:n.invoicePrefix,onChange:f}),Object(r.jsx)(l.HelperText,{children:"Prefix for invoice numbers (e.g., INV-202409-0001)"})]}),Object(r.jsxs)(l.Label,{className:"md:col-span-2",children:[Object(r.jsx)("span",{children:"Terms & Conditions"}),Object(r.jsx)("textarea",{name:"terms",value:n.terms,onChange:f,className:"mt-1 block w-full pt-2 pl-2 border-2 border-gray-300 rounded-md shadow-sm focus:border-purple-300 focus:ring focus:ring-purple-200 focus:ring-opacity-50 dark:border-gray-600 dark:bg-gray-700 dark:text-white",rows:"4",placeholder:"Enter default terms and conditions for quotations..."})]})]}),x&&Object(r.jsx)(l.HelperText,{valid:!1,className:"mt-4",children:x}),Object(r.jsx)("div",{className:"mt-6",children:Object(r.jsx)(l.Button,{onClick:async()=>{m(!0),h("");try{let e=p;if(v)try{const a=await new Promise((e,a)=>{const n=new FileReader;n.onload=()=>e(n.result),n.onerror=a,n.readAsDataURL(v)}),n=await Object(o.d)("/configuration/upload-logo",{logoBase64:a});if(!n.success)throw new Error(n.message||"Logo upload failed");e=n.logoUrl}catch(t){return h("Failed to upload logo: "+t.message),void m(!1)}const s={bank:{name:n.bankName,accountName:n.accountName,accountNumber:n.accountNumber},business:{name:n.businessName,nameColor:n.businessNameColor,address:n.address,mobileNum:n.mobileNum,businessNum:n.businessNum,email:n.email,web:n.web,logo:e,taxId:n.taxId,currency:n.currency},quotation:{validity:Number(n.validity),terms:n.terms,quotationPrefix:n.quotationPrefix,invoicePrefix:n.invoicePrefix,currency:n.currency}},i=await Object(o.d)("/configuration",s);i.success?(a(i.data.configuration),alert("Configuration saved successfully"),window.dispatchEvent(new CustomEvent("currencyUpdated",{detail:{currency:n.currency}}))):h(i.message||"Save failed")}catch(i){var e,s;h((null===(e=i.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||i.message||"Save failed"),console.error(i)}finally{m(!1)}},style:{backgroundColor:"#AA1A21"},className:"text-white",disabled:j,children:j?"Saving...":e?"Update Configuration":"Save Configuration"})})]})]});var N}},51:function(e,a,n){"use strict";n(1);var s=n(3);a.a=function(e){let{children:a}=e;return Object(s.jsx)("h1",{className:"my-6 text-2xl font-semibold text-gray-700 dark:text-gray-200",children:a})}}}]);
//# sourceMappingURL=21.d4fcf023.chunk.js.map