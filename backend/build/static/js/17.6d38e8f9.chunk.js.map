{"version":3,"sources":["pages/Products/CreateProducts.js","components/Typography/PageTitle.js","components/Typography/SectionTitle.js"],"names":["CreateProducts","history","useHistory","formData","setFormData","useState","name","description","sellingPrice","purchasePrice","size","sizes","setSizes","loadingSizes","setLoadingSizes","loading","setLoading","errors","setErrors","apiError","setApiError","useEffect","fetchSizes","async","response","get","success","data","console","error","message","handleInputChange","e","value","target","prev","_objectSpread","parseFloat","handleCancel","push","_jsxs","_Fragment","children","className","_jsx","PageTitle","Button","type","layout","onClick","disabled","SectionTitle","onSubmit","preventDefault","validateForm","newErrors","trim","length","Object","keys","cleanedData","undefined","post","alert","_error$response","_error$response$data","_error$response2","_error$response2$data","backendErrors","forEach","key","Label","Input","onChange","placeholder","required","valid","maxLength","HelperText","rows","Select","map","_id","step","min","style","backgroundColor","_ref"],"mappings":"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","file":"static/js/17.6d38e8f9.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { post, get } from '../../api/axios'\r\n\r\nimport PageTitle from '../../components/Typography/PageTitle'\r\nimport SectionTitle from '../../components/Typography/SectionTitle'\r\nimport { Input, Label, Button, HelperText, Select } from '@windmill/react-ui'\r\n\r\nfunction CreateProducts() {\r\n  const history = useHistory()\r\n\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    description: '',\r\n    sellingPrice: 0,\r\n    purchasePrice: 0,\r\n    size: ''\r\n  })\r\n\r\n  const [sizes, setSizes] = useState([])\r\n  const [loadingSizes, setLoadingSizes] = useState(true)\r\n  const [loading, setLoading] = useState(false)\r\n  const [errors, setErrors] = useState({})\r\n  const [apiError, setApiError] = useState('')\r\n\r\n  useEffect(() => {\r\n    fetchSizes()\r\n  }, [])\r\n\r\n  const fetchSizes = async () => {\r\n    try {\r\n      setLoadingSizes(true)\r\n      const response = await get('/sizes/all')\r\n      if (response.success) {\r\n        setSizes(response.data.sizes)\r\n      } else {\r\n        console.error('Error fetching sizes:', response.message)\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching sizes:', error)\r\n    } finally {\r\n      setLoadingSizes(false)\r\n    }\r\n  }\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [name]: name === 'sellingPrice' || name === 'purchasePrice' ? parseFloat(value) || 0 : value\r\n    }))\r\n\r\n    if (errors[name]) {\r\n      setErrors(prev => ({\r\n        ...prev,\r\n        [name]: ''\r\n      }))\r\n    }\r\n\r\n    if (apiError) {\r\n      setApiError('')\r\n    }\r\n  }\r\n\r\n  const validateForm = () => {\r\n    const newErrors = {}\r\n\r\n    if (!formData.name.trim()) {\r\n      newErrors.name = 'Product name is required'\r\n    } else if (formData.name.length > 200) {\r\n      newErrors.name = 'Product name cannot exceed 200 characters'\r\n    }\r\n\r\n    if (formData.description && formData.description.length > 1000) {\r\n      newErrors.description = 'Description cannot exceed 1000 characters'\r\n    }\r\n\r\n    if (!formData.size) {\r\n      newErrors.size = 'Size is required'\r\n    }\r\n\r\n    if (!formData.sellingPrice || formData.sellingPrice < 0) {\r\n      newErrors.sellingPrice = 'Selling price must be 0 or greater'\r\n    }\r\n\r\n    if (!formData.purchasePrice || formData.purchasePrice < 0) {\r\n      newErrors.purchasePrice = 'Purchase price must be 0 or greater'\r\n    }\r\n\r\n    setErrors(newErrors)\r\n    return Object.keys(newErrors).length === 0\r\n  }\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault()\r\n\r\n    if (!validateForm()) {\r\n      return\r\n    }\r\n\r\n    setLoading(true)\r\n    setApiError('')\r\n\r\n    try {\r\n      const cleanedData = {\r\n        name: formData.name.trim(),\r\n        description: formData.description.trim() || undefined,\r\n        sellingPrice: parseFloat(formData.sellingPrice),\r\n        purchasePrice: parseFloat(formData.purchasePrice),\r\n        size: formData.size\r\n      }\r\n\r\n      const response = await post(\"/products\", cleanedData)\r\n\r\n      if (response.success) {\r\n        alert('Product created successfully!')\r\n        history.push('/app/products')\r\n      } else {\r\n        setApiError(response.message || 'Failed to create product. Please try again.')\r\n      }\r\n    } catch (error) {\r\n      console.error('Error creating product:', error)\r\n\r\n      if (error.response?.data?.message) {\r\n        setApiError(error.response.data.message)\r\n      } else if (error.response?.data?.error) {\r\n        if (typeof error.response.data.error === 'string') {\r\n          setApiError(error.response.data.error)\r\n        } else if (error.response.data.error.errors) {\r\n          const backendErrors = {}\r\n          Object.keys(error.response.data.error.errors).forEach(key => {\r\n            backendErrors[key] = error.response.data.error.errors[key].message\r\n          })\r\n          setErrors(backendErrors)\r\n        }\r\n      } else if (error.message) {\r\n        setApiError(error.message)\r\n      } else {\r\n        setApiError('Failed to create product. Please check your connection and try again.')\r\n      }\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  const handleCancel = () => {\r\n    history.push('/app/products')\r\n  }\r\n\r\n  const navigateToSizes = () => {\r\n    history.push('/app/sizes')\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"flex justify-between items-center mb-6\">\r\n        <PageTitle>Add New Product</PageTitle>\r\n        <Button\r\n          type=\"button\"\r\n          layout=\"outline\"\r\n          onClick={handleCancel}\r\n          disabled={loading}\r\n        >\r\n          Back to Products\r\n        </Button>\r\n      </div>\r\n\r\n      <div className=\"px-4 py-3 mb-8 bg-white rounded-lg shadow-md dark:bg-gray-800\">\r\n        <SectionTitle>Product Information</SectionTitle>\r\n\r\n        <form onSubmit={handleSubmit}>\r\n          {apiError && (\r\n            <div className=\"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded\">\r\n              {apiError}\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"grid grid-cols-1 gap-4\">\r\n            <Label>\r\n              <span>Product Name *</span>\r\n              <Input\r\n                className=\"mt-1\"\r\n                name=\"name\"\r\n                value={formData.name}\r\n                onChange={handleInputChange}\r\n                placeholder=\"Enter product name\"\r\n                required\r\n                valid={!errors.name}\r\n                maxLength={200}\r\n              />\r\n              {errors.name && (\r\n                <HelperText valid={false}>{errors.name}</HelperText>\r\n              )}\r\n            </Label>\r\n\r\n            <Label>\r\n              <span>Description</span>\r\n              <textarea\r\n                className=\"mt-1 block w-full pt-2 pl-2 border-2 border-gray-300 rounded-md shadow-sm focus:border-purple-300 focus:ring focus:ring-purple-200 focus:ring-opacity-50 dark:border-gray-600 dark:bg-gray-700 dark:text-white\"\r\n                name=\"description\"\r\n                value={formData.description}\r\n                onChange={handleInputChange}\r\n                rows=\"4\"\r\n                placeholder=\"Enter product description (optional)\"\r\n                maxLength={1000}\r\n              />\r\n              {errors.description && (\r\n                <HelperText valid={false}>{errors.description}</HelperText>\r\n              )}\r\n            </Label>\r\n\r\n            <Label>\r\n              <div className=\"flex justify-between items-center\">\r\n                <span>Size *</span>\r\n             \r\n              </div>\r\n              {loadingSizes ? (\r\n                <div className=\"mt-1 p-2 text-gray-500\">Loading sizes...</div>\r\n              ) : (\r\n                <Select\r\n                  className=\"mt-1\"\r\n                  name=\"size\"\r\n                  value={formData.size}\r\n                  onChange={handleInputChange}\r\n                  required\r\n                  valid={!errors.size}\r\n                >\r\n                  <option value=\"\">Select a size</option>\r\n                  {sizes.map((size) => (\r\n                    <option key={size._id} value={size._id}>\r\n                      {size.name}\r\n                    </option>\r\n                  ))}\r\n                </Select>\r\n              )}\r\n              {errors.size && (\r\n                <HelperText valid={false}>{errors.size}</HelperText>\r\n              )}\r\n              {!loadingSizes && sizes.length === 0 && (\r\n                <HelperText valid={false}>\r\n                  No sizes available. Please create sizes first.\r\n                </HelperText>\r\n              )}\r\n            </Label>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              <Label>\r\n                <span>Purchase Price *</span>\r\n                <Input\r\n                  className=\"mt-1\"\r\n                  name=\"purchasePrice\"\r\n                  type=\"number\"\r\n                  step=\"0.01\"\r\n                  min=\"0\"\r\n                  value={formData.purchasePrice}\r\n                  onChange={handleInputChange}\r\n                  placeholder=\"0.00\"\r\n                  required\r\n                  valid={!errors.purchasePrice}\r\n                />\r\n                {errors.purchasePrice && (\r\n                  <HelperText valid={false}>{errors.purchasePrice}</HelperText>\r\n                )}\r\n              </Label>\r\n\r\n              <Label>\r\n                <span>Selling Price *</span>\r\n                <Input\r\n                  className=\"mt-1\"\r\n                  name=\"sellingPrice\"\r\n                  type=\"number\"\r\n                  step=\"0.01\"\r\n                  min=\"0\"\r\n                  value={formData.sellingPrice}\r\n                  onChange={handleInputChange}\r\n                  placeholder=\"0.00\"\r\n                  required\r\n                  valid={!errors.sellingPrice}\r\n                />\r\n                {errors.sellingPrice && (\r\n                  <HelperText valid={false}>{errors.sellingPrice}</HelperText>\r\n                )}\r\n              </Label>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex justify-end space-x-4 mt-6\">\r\n            <Button\r\n              type=\"button\"\r\n              layout=\"outline\"\r\n              onClick={handleCancel}\r\n              disabled={loading}\r\n            >\r\n              Cancel\r\n            </Button>\r\n            <Button\r\n              type=\"submit\"\r\n              style={{ backgroundColor: \"#AA1A21\" }}\r\n              className=\"text-white\"\r\n              disabled={loading || loadingSizes}\r\n            >\r\n              {loading ? 'Creating...' : 'Create Product'}\r\n            </Button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default CreateProducts","import React from 'react'\r\n\r\nfunction PageTitle({ children }) {\r\n  return (\r\n    <h1 className=\"my-6 text-2xl font-semibold text-gray-700 dark:text-gray-200\">{children}</h1>\r\n  )\r\n}\r\n\r\nexport default PageTitle\r\n","import React from 'react'\r\n\r\nfunction SectionTitle({ children }) {\r\n  return <h2 className=\"mb-4 text-lg font-semibold text-gray-600 dark:text-gray-300\">{children}</h2>\r\n}\r\n\r\nexport default SectionTitle\r\n"],"sourceRoot":""}