(this["webpackJsonpquotation-maker"]=this["webpackJsonpquotation-maker"]||[]).push([[25],{211:function(e,t,c){"use strict";c.r(t);var n=c(5),r=c(1),i=c(4),s=c(13),a=c(24),l=c(51),o=c(3);t.default=function(){const e=Object(i.g)(),{id:t}=Object(i.i)(),[c,j]=Object(r.useState)({name:"",description:"",client:"",currency:""}),[d,u]=Object(r.useState)([]),[b,p]=Object(r.useState)([]),[h,O]=Object(r.useState)({}),[x,m]=Object(r.useState)(""),[y,v]=Object(r.useState)(!1),[g,f]=Object(r.useState)(!0);Object(r.useEffect)(()=>{w(),C(),S()},[t]);const S=async()=>{try{const n=await Object(s.b)("/projects/".concat(t));if(n.success){var e,c;const t=n.data;j({name:t.name||"",description:t.description||"",client:(null===(e=t.client)||void 0===e?void 0:e._id)||"",currency:(null===(c=t.currency)||void 0===c?void 0:c._id)||""})}else m("Project not found")}catch(n){console.error(n),m("Failed to fetch project")}finally{f(!1)}},w=async()=>{try{const e=await Object(s.b)("/clients");e.success?u(e.data):u([])}catch(e){console.error("Error fetching clients:",e)}},C=async()=>{try{const e=await Object(s.b)("/currencies");e.success?p(e.data):p([])}catch(e){console.error("Error fetching currency:",e)}},k=e=>{const{name:t,value:c}=e.target;j(e=>Object(n.a)(Object(n.a)({},e),{},{[t]:c})),h[t]&&O(e=>Object(n.a)(Object(n.a)({},e),{},{[t]:""})),x&&m("")};return g?Object(o.jsx)("div",{className:"text-center py-20",children:"Loading project..."}):Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(l.a,{children:"Edit Project"}),x&&Object(o.jsx)("div",{className:"mb-4 text-red-600",children:x}),Object(o.jsxs)("form",{onSubmit:async n=>{if(n.preventDefault(),(()=>{const e={};return c.name.trim()||(e.name="Project name is required"),c.description.trim()||(e.description="Description is required"),c.client.trim()||(e.client="Client is required"),c.currency.trim()||(e.currency="currency is required"),O(e),0===Object.keys(e).length})()){v(!0);try{(await Object(s.d)("/projects/".concat(t),c)).success?e.push("/app/projects"):m("Failed to update project")}catch(r){m(r.message||"Something went wrong")}finally{v(!1)}}},className:"grid gap-6 max-w-4xl",children:[Object(o.jsxs)(a.Label,{children:[Object(o.jsx)("span",{children:"Project Name *"}),Object(o.jsx)(a.Input,{name:"name",value:c.name,onChange:k,valid:!h.name}),h.name&&Object(o.jsx)(a.HelperText,{valid:!1,children:h.name})]}),Object(o.jsxs)(a.Label,{children:[Object(o.jsx)("span",{children:"Description *"}),Object(o.jsx)(a.Textarea,{name:"description",value:c.description,onChange:k,rows:"4",valid:!h.description}),h.description&&Object(o.jsx)(a.HelperText,{valid:!1,children:h.description})]}),Object(o.jsxs)(a.Label,{children:[Object(o.jsx)("span",{children:"Client *"}),Object(o.jsxs)(a.Select,{name:"client",value:c.client,onChange:k,valid:!h.client,children:[Object(o.jsx)("option",{value:"",children:"Select Client"}),d.map(e=>Object(o.jsxs)("option",{value:e._id,children:[e.name," - ",e.businessName]},e._id))]}),h.client&&Object(o.jsx)(a.HelperText,{valid:!1,children:h.client})]}),Object(o.jsxs)(a.Label,{children:[Object(o.jsx)("span",{children:"Base Currency *"}),Object(o.jsxs)(a.Select,{name:"currency",value:c.currency,onChange:k,valid:!h.currency,children:[Object(o.jsx)("option",{value:"",children:"Select currency"}),b.map(e=>Object(o.jsx)("option",{value:e._id,children:e.currency},e._id))]}),h.currency&&Object(o.jsx)(a.HelperText,{valid:!1,children:h.currency})]}),Object(o.jsxs)("div",{className:"flex gap-4",children:[Object(o.jsx)(a.Button,{layout:"outline",onClick:()=>{e.push("/app/clients")},children:"Cancel"}),Object(o.jsx)(a.Button,{type:"submit",style:{backgroundColor:"#AA1A21"},className:"text-white",disabled:y,children:y?"Updating...":"Update Project"})]})]})]})}},51:function(e,t,c){"use strict";c(1);var n=c(3);t.a=function(e){let{children:t}=e;return Object(n.jsx)("h1",{className:"my-6 text-2xl font-semibold text-gray-700 dark:text-gray-200",children:t})}}}]);
//# sourceMappingURL=25.54265552.chunk.js.map